<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
  <title>天飞 学习笔记</title>
  
  
  <link href="/atom.xml" rel="self"/>
  
  <link href="https://talenhao.github.io/"/>
  <updated>2020-06-03T13:17:21.000Z</updated>
  <id>https://talenhao.github.io/</id>
  
  <author>
    <name>天飞</name>
    
  </author>
  
  <generator uri="http://hexo.io/">Hexo</generator>
  
  <entry>
    <title>pyenv下载官方python版本速度慢解决方法</title>
    <link href="https://talenhao.github.io/2020/06/03/pyenv%E4%B8%8B%E8%BD%BD%E5%AE%98%E6%96%B9python%E7%89%88%E6%9C%AC%E9%80%9F%E5%BA%A6%E6%85%A2%E8%A7%A3%E5%86%B3%E6%96%B9%E6%B3%95/"/>
    <id>https://talenhao.github.io/2020/06/03/pyenv下载官方python版本速度慢解决方法/</id>
    <published>2020-06-03T13:17:21.000Z</published>
    <updated>2020-06-03T13:17:21.000Z</updated>
    
    <content type="html"><![CDATA[<h1 id="pyenv下载官方python版本速度慢解决方法"><a href="#pyenv下载官方python版本速度慢解决方法" class="headerlink" title="pyenv下载官方python版本速度慢解决方法"></a>pyenv下载官方python版本速度慢解决方法</h1><p>使用默认的pyenv install <em>python 版本号</em> 的方式安装，国内下载速度太慢，有时还会中断。</p><p>可以先使用国内的python镜像网站下载好对应的python tar.xz包，放置于$HOME/.pyenv/cache/目录下，然后再使用安装命令安装的曲线方案。</p><p>命令行一键安装如下：</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">[Wed Jun 03 talen@tp ~]$ version="2.7.16"; echo $version; wget "https://mirrors.huaweicloud.com/python/$version/Python-$version.tar.xz" -P ~/.pyenv/cache/;pyenv install $version</span><br><span class="line">2.7.16</span><br><span class="line">--2020-06-03 21:15:36--  https://mirrors.huaweicloud.com/python/2.7.16/Python-2.7.16.tar.xz</span><br><span class="line">Loaded CA certificate '/etc/ssl/certs/ca-certificates.crt'</span><br><span class="line">Resolving mirrors.huaweicloud.com (mirrors.huaweicloud.com)... 117.78.24.36, 117.78.24.32, 117.78.24.34</span><br><span class="line">Connecting to mirrors.huaweicloud.com (mirrors.huaweicloud.com)|117.78.24.36|:443... connected.</span><br><span class="line">HTTP request sent, awaiting response... 200 OK</span><br><span class="line">Length: 12752104 (12M) [application/octet-stream]</span><br><span class="line">Saving to: ‘/home/talen/.pyenv/cache/Python-2.7.16.tar.xz’</span><br><span class="line"></span><br><span class="line">Python-2.7.16.tar.xz               100%[=============================================================&gt;]  12.16M  8.91MB/s    in 1.4s</span><br><span class="line"></span><br><span class="line">2020-06-03 21:15:37 (8.91 MB/s) - ‘/home/talen/.pyenv/cache/Python-2.7.16.tar.xz’ saved [12752104/12752104]</span><br><span class="line"></span><br><span class="line">Installing Python-2.7.16...</span><br><span class="line">Installed Python-2.7.16 to /home/talen/.pyenv/versions/2.7.16</span><br></pre></td></tr></table></figure><p>然后就可以愉快的工作了</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">[Wed Jun 03 talen@tp ~]$ pyenv shell 2.7.16</span><br><span class="line">[Wed Jun 03 talen@tp ~]$ pyenv virtualenvwrapper_lazy </span><br><span class="line">Looking in indexes: https://pypi.tuna.tsinghua.edu.cn/simple</span><br><span class="line">Collecting virtualenvwrapper</span><br><span class="line">Downloading https://pypi.tuna.tsinghua.edu.cn/packages/c1/6b/2f05d73b2d2f2410b48b90d3783a0034c26afa534a4a95ad5f1178d61191/virtualenvwrapper-4.8.4.tar.gz (334kB)</span><br><span class="line">...</span><br><span class="line"></span><br><span class="line">[Wed Jun 03 talen@tp ~]$ pyenv version</span><br><span class="line">2.7.16 (set by PYENV_VERSION environment variable)</span><br><span class="line">[Wed Jun 03 talen@tp ~]$ workon</span><br><span class="line">anaconda</span><br><span class="line">beibei</span><br><span class="line">beibei_capacity</span><br><span class="line">beibei_es_log</span><br><span class="line">celery</span><br><span class="line">diagrams-on-python</span><br><span class="line">django_celery_ansible</span><br><span class="line">djangoreactproject</span><br><span class="line">django-rest</span><br><span class="line">dns_healthcheck</span><br><span class="line">dnsmonitor</span><br><span class="line">fly_ops</span><br><span class="line">graph</span><br><span class="line">jumpserver</span><br><span class="line">leetcode</span><br><span class="line">log4p</span><br><span class="line">mxshop</span><br><span class="line">sklearn_study</span><br><span class="line">spider</span><br><span class="line">study</span><br><span class="line">study-xfz</span><br><span class="line">test_relocatable</span><br></pre></td></tr></table></figure>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h1 id=&quot;pyenv下载官方python版本速度慢解决方法&quot;&gt;&lt;a href=&quot;#pyenv下载官方python版本速度慢解决方法&quot; class=&quot;headerlink&quot; title=&quot;pyenv下载官方python版本速度慢解决方法&quot;&gt;&lt;/a&gt;pyenv下载官方pytho
      
    
    </summary>
    
      <category term="python" scheme="https://talenhao.github.io/categories/python/"/>
    
    
      <category term="python" scheme="https://talenhao.github.io/tags/python/"/>
    
  </entry>
  
  <entry>
    <title>流畅的Python读书笔记-第 14 章 可迭代的对象、迭代器和生成器</title>
    <link href="https://talenhao.github.io/2020/05/27/%E6%B5%81%E7%95%85%E7%9A%84Python%E8%AF%BB%E4%B9%A6%E7%AC%94%E8%AE%B0/"/>
    <id>https://talenhao.github.io/2020/05/27/流畅的Python读书笔记/</id>
    <published>2020-05-27T02:37:04.000Z</published>
    <updated>2020-05-27T02:37:04.000Z</updated>
    
    <content type="html"><![CDATA[<h1 id="第-14-章-可迭代的对象、迭代器和生成器"><a href="#第-14-章-可迭代的对象、迭代器和生成器" class="headerlink" title="第 14 章 可迭代的对象、迭代器和生成器"></a>第 14 章 可迭代的对象、迭代器和生成器</h1><h3 id="14-2-可迭代的对象与迭代器的对比"><a href="#14-2-可迭代的对象与迭代器的对比" class="headerlink" title="14.2 可迭代的对象与迭代器的对比"></a>14.2 可迭代的对象与迭代器的对比</h3><p>使用 iter 内置函数可以获取迭代器的对象。</p><p>如果对象实现了能返回迭代器的<strong>iter</strong> 方法,那么对象就是可迭代的。</p><p>序列都可以迭代;实现了 <strong>getitem</strong> 方法,而且其参数是从零开始的索引,这种对象也可以迭代。</p><h4 id="14-3-Sentence类第2版-典型的迭代器"><a href="#14-3-Sentence类第2版-典型的迭代器" class="headerlink" title="14.3 Sentence类第2版:典型的迭代器"></a>14.3 Sentence类第2版:典型的迭代器</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">迭代器是这样的对象:实现了无参数的 __next__ 方法,返回序列中的下一个元素;</span><br><span class="line">如果没有元素了,那么抛出 StopIteration 异常。Python 中的迭代器还实现了__iter__ 方法,因此迭代器也可以迭代。</span><br></pre></td></tr></table></figure><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">标准的迭代器接口有两个方法。</span><br><span class="line">__next__</span><br><span class="line">返回下一个可用的元素,如果没有元素了,抛出 StopIteration 异常。</span><br><span class="line">__iter__</span><br><span class="line">返回 self,以便在应该使用可迭代对象的地方使用迭代器,例如在 for 循环中。</span><br></pre></td></tr></table></figure><a id="more"></a><h4 id="迭代器无法还原"><a href="#迭代器无法还原" class="headerlink" title="迭代器无法还原"></a>迭代器无法还原</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">因为迭代器只需 __next__ 和 __iter__ 两个方法,所以除了调用 next() 方法,以及捕获 StopIteration 异常之外,没有办法检查是否还有遗留的元素。此外,也没有办法“还原”迭代器。</span><br><span class="line">如果想再次迭代,那就要调用iter(...),传入之前构建迭代器的可迭代对象。传入迭代器本身没用,因为前面说过Iterator.__iter__方法的实现方式是返回实例本身,所以传入迭代器无法还原已经耗尽的迭代器。</span><br></pre></td></tr></table></figure><h4 id="可迭代对象与迭代器"><a href="#可迭代对象与迭代器" class="headerlink" title="可迭代对象与迭代器"></a>可迭代对象与迭代器</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">可迭代的对象一定不能是自身的迭代器。也就是说,可迭代的对象必须实现__iter__ 方法,但不能实现 __next__ 方法。</span><br><span class="line">另一方面,迭代器应该一直可以迭代。迭代器的 __iter__ 方法应该返回自身。</span><br></pre></td></tr></table></figure><h4 id="14-4-Sentence类第3版-生成器函数"><a href="#14-4-Sentence类第3版-生成器函数" class="headerlink" title="14.4 Sentence类第3版:生成器函数"></a>14.4 Sentence类第3版:生成器函数</h4><ul><li>更符合python风格的可迭代对像创建</li><li>使用生成器函数<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">生成器函数的工作原理</span><br><span class="line"></span><br><span class="line">只要 Python 函数的定义体中有 yield 关键字,该函数就是生成器函数。调用生成器函数时,会返回一个生成器对象。也就是说,生成器函数是生成器工厂。</span><br></pre></td></tr></table></figure></li></ul><p><em>函数返回值;调用生成器函数返回生成器;生成器产出或生成值。</em></p><h4 id="14-5-Sentence类第4版-惰性实现"><a href="#14-5-Sentence类第4版-惰性实现" class="headerlink" title="14.5 Sentence类第4版:惰性实现"></a>14.5 Sentence类第4版:惰性实现</h4><p>re.finditer 函数是 re.findall 函数的惰性版本,返回的不是列表,而是一个生成<br>器,按需生成 re.MatchObject 实例。如果有很多匹配,re.finditer 函数能节省大量<br>内存。</p><h4 id="14-6-Sentence类第5版-生成器表达式"><a href="#14-6-Sentence类第5版-生成器表达式" class="headerlink" title="14.6 Sentence类第5版:生成器表达式"></a>14.6 Sentence类第5版:生成器表达式</h4><p>生成器表达式可以理解为列表推导的惰性版本:不会迫切地构建列表,而是返回一个生成器,按需惰性生成元素。</p><p>也就是说,如果列表推导是制造列表的工厂,那么生成器表达式就是制造生成器的工厂。</p><p><em>() 替换 []</em></p><h4 id="14-7-何时使用生成器表达式"><a href="#14-7-何时使用生成器表达式" class="headerlink" title="14.7 何时使用生成器表达式"></a>14.7 何时使用生成器表达式</h4><p>如果生成器表达式要分成多行写,我倾向于定义生成器函数,以便提高可读性。此外,生成器函数有名称,因此可以重用。</p>]]></content>
    
    <summary type="html">
    
      &lt;h1 id=&quot;第-14-章-可迭代的对象、迭代器和生成器&quot;&gt;&lt;a href=&quot;#第-14-章-可迭代的对象、迭代器和生成器&quot; class=&quot;headerlink&quot; title=&quot;第 14 章 可迭代的对象、迭代器和生成器&quot;&gt;&lt;/a&gt;第 14 章 可迭代的对象、迭代器和生成器&lt;/h1&gt;&lt;h3 id=&quot;14-2-可迭代的对象与迭代器的对比&quot;&gt;&lt;a href=&quot;#14-2-可迭代的对象与迭代器的对比&quot; class=&quot;headerlink&quot; title=&quot;14.2 可迭代的对象与迭代器的对比&quot;&gt;&lt;/a&gt;14.2 可迭代的对象与迭代器的对比&lt;/h3&gt;&lt;p&gt;使用 iter 内置函数可以获取迭代器的对象。&lt;/p&gt;
&lt;p&gt;如果对象实现了能返回迭代器的&lt;strong&gt;iter&lt;/strong&gt; 方法,那么对象就是可迭代的。&lt;/p&gt;
&lt;p&gt;序列都可以迭代;实现了 &lt;strong&gt;getitem&lt;/strong&gt; 方法,而且其参数是从零开始的索引,这种对象也可以迭代。&lt;/p&gt;
&lt;h4 id=&quot;14-3-Sentence类第2版-典型的迭代器&quot;&gt;&lt;a href=&quot;#14-3-Sentence类第2版-典型的迭代器&quot; class=&quot;headerlink&quot; title=&quot;14.3 Sentence类第2版:典型的迭代器&quot;&gt;&lt;/a&gt;14.3 Sentence类第2版:典型的迭代器&lt;/h4&gt;&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;迭代器是这样的对象:实现了无参数的 __next__ 方法,返回序列中的下一个元素;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;如果没有元素了,那么抛出 StopIteration 异常。Python 中的迭代器还实现了__iter__ 方法,因此迭代器也可以迭代。&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;

&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;标准的迭代器接口有两个方法。&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;__next__&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;返回下一个可用的元素,如果没有元素了,抛出 StopIteration 异常。&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;__iter__&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;返回 self,以便在应该使用可迭代对象的地方使用迭代器,例如在 for 循环中。&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
    
    </summary>
    
      <category term="python" scheme="https://talenhao.github.io/categories/python/"/>
    
    
      <category term="流畅的Python" scheme="https://talenhao.github.io/tags/%E6%B5%81%E7%95%85%E7%9A%84Python/"/>
    
  </entry>
  
  <entry>
    <title>kafka</title>
    <link href="https://talenhao.github.io/2020/04/10/kafka/"/>
    <id>https://talenhao.github.io/2020/04/10/kafka/</id>
    <published>2020-04-10T07:35:34.000Z</published>
    <updated>2020-04-10T07:35:34.000Z</updated>
    
    <content type="html"><![CDATA[<p><img src="../../../../images/kafka.png" alt="img"></p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;p&gt;&lt;img src=&quot;../../../../images/kafka.png&quot; alt=&quot;img&quot;&gt;&lt;/p&gt;

      
    
    </summary>
    
      <category term="mq" scheme="https://talenhao.github.io/categories/mq/"/>
    
    
      <category term="kafka" scheme="https://talenhao.github.io/tags/kafka/"/>
    
  </entry>
  
  <entry>
    <title>硬盘知识整理</title>
    <link href="https://talenhao.github.io/2020/03/09/%E7%A1%AC%E7%9B%98%E7%9F%A5%E8%AF%86%E6%95%B4%E7%90%86/"/>
    <id>https://talenhao.github.io/2020/03/09/硬盘知识整理/</id>
    <published>2020-03-09T07:54:39.000Z</published>
    <updated>2020-03-09T07:54:39.000Z</updated>
    
    <content type="html"><![CDATA[<p><img src="../../../../images/disk.png" alt="img"></p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;p&gt;&lt;img src=&quot;../../../../images/disk.png&quot; alt=&quot;img&quot;&gt;&lt;/p&gt;

      
    
    </summary>
    
      <category term="linux" scheme="https://talenhao.github.io/categories/linux/"/>
    
    
      <category term="linux" scheme="https://talenhao.github.io/tags/linux/"/>
    
  </entry>
  
  <entry>
    <title>Traefik 2.1 简单安装</title>
    <link href="https://talenhao.github.io/2020/01/14/Traefik-2-1-%E7%AE%80%E5%8D%95%E5%AE%89%E8%A3%85/"/>
    <id>https://talenhao.github.io/2020/01/14/Traefik-2-1-简单安装/</id>
    <published>2020-01-14T08:24:16.000Z</published>
    <updated>2020-01-14T08:24:16.000Z</updated>
    
    <content type="html"><![CDATA[<p>Traefik是一个开源的kubernetes ingress controller,用于实现边缘路由，反向代理，自动发现服务。</p><p>Traefik支持多种集群技术做为它的Providers,主流使用的如Kubernetes，Docker，Docker Swarm，AWS，Mesos等等</p><p><img src="../../../../images/traefik-architecture.png" alt="img"></p><p>Traefik是一个边缘路由器，可以作为Kuberetes服务对外暴露的入口。</p><p><img src="../../../../images/traefik-architecture-overview.png" alt="traefik architecture overview"></p><p>更的详细介绍参考官方网站：<a href="https://docs.traefik.io/" target="_blank" rel="noopener">https://docs.traefik.io/</a></p><h1 id="安装"><a href="#安装" class="headerlink" title="安装"></a>安装</h1><a id="more"></a><p>安装步骤：</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">[root@kube-master-1 yaml]# ll</span><br><span class="line">total 48</span><br><span class="line">-rw-r--r--. 1 root root 1445 Jan 13 10:40 0.traefik-crd.yaml</span><br><span class="line">-rw-r--r--. 1 root root 1126 Jan 14 00:51 1.traefik-rbac.yaml</span><br><span class="line">-rw-r--r--. 1 root root  421 Jan 14 00:55 2.traefik-sa.yaml</span><br><span class="line">-rw-r--r--. 1 root root 2879 Jan 16 10:03 3.traefik-deployment.yaml</span><br><span class="line">-rw-r--r--. 1 root root  459 Jan 14 21:55 4.traefik-service.yaml</span><br><span class="line">-rw-r--r--. 1 root root  225 Jan 14 15:17 5.traefik-dashboard.yaml</span><br><span class="line">-rw-r--r--. 1 root root 7576 Jan 16 01:54 6.kubernetes-dashboard.yaml</span><br><span class="line">-rw-r--r--. 1 root root  508 Jan 16 01:32 7.kubernetes-dashboard-ingress.yaml</span><br><span class="line">-rw-r--r--. 1 root root  474 Jan 16 00:56 8.kubernetes-dashboard-service-account.yaml</span><br><span class="line">drwxr-xr-x. 2 root root   99 Jan 16 01:39 certs</span><br></pre></td></tr></table></figure><p>依次使用<code>kubectl apply -f xx.yaml</code>命令安装</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[root@kube-master-1 yaml]# cat 0.traefik-crd.yaml</span><br></pre></td></tr></table></figure><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">apiVersion:</span> <span class="string">apiextensions.k8s.io/v1beta1</span></span><br><span class="line"><span class="attr">kind:</span> <span class="string">CustomResourceDefinition</span></span><br><span class="line"><span class="attr">metadata:</span></span><br><span class="line"><span class="attr">  name:</span> <span class="string">ingressroutes.traefik.containo.us</span></span><br><span class="line"></span><br><span class="line"><span class="attr">spec:</span></span><br><span class="line"><span class="attr">  group:</span> <span class="string">traefik.containo.us</span></span><br><span class="line"><span class="attr">  version:</span> <span class="string">v1alpha1</span></span><br><span class="line"><span class="attr">  names:</span></span><br><span class="line"><span class="attr">    kind:</span> <span class="string">IngressRoute</span></span><br><span class="line"><span class="attr">    plural:</span> <span class="string">ingressroutes</span></span><br><span class="line"><span class="attr">    singular:</span> <span class="string">ingressroute</span></span><br><span class="line"><span class="attr">  scope:</span> <span class="string">Namespaced</span></span><br><span class="line"></span><br><span class="line"><span class="meta">---</span></span><br><span class="line"><span class="attr">apiVersion:</span> <span class="string">apiextensions.k8s.io/v1beta1</span></span><br><span class="line"><span class="attr">kind:</span> <span class="string">CustomResourceDefinition</span></span><br><span class="line"><span class="attr">metadata:</span></span><br><span class="line"><span class="attr">  name:</span> <span class="string">middlewares.traefik.containo.us</span></span><br><span class="line"></span><br><span class="line"><span class="attr">spec:</span></span><br><span class="line"><span class="attr">  group:</span> <span class="string">traefik.containo.us</span></span><br><span class="line"><span class="attr">  version:</span> <span class="string">v1alpha1</span></span><br><span class="line"><span class="attr">  names:</span></span><br><span class="line"><span class="attr">    kind:</span> <span class="string">Middleware</span></span><br><span class="line"><span class="attr">    plural:</span> <span class="string">middlewares</span></span><br><span class="line"><span class="attr">    singular:</span> <span class="string">middleware</span></span><br><span class="line"><span class="attr">  scope:</span> <span class="string">Namespaced</span></span><br><span class="line"></span><br><span class="line"><span class="meta">---</span></span><br><span class="line"><span class="attr">apiVersion:</span> <span class="string">apiextensions.k8s.io/v1beta1</span></span><br><span class="line"><span class="attr">kind:</span> <span class="string">CustomResourceDefinition</span></span><br><span class="line"><span class="attr">metadata:</span></span><br><span class="line"><span class="attr">  name:</span> <span class="string">ingressroutetcps.traefik.containo.us</span></span><br><span class="line"></span><br><span class="line"><span class="attr">spec:</span></span><br><span class="line"><span class="attr">  group:</span> <span class="string">traefik.containo.us</span></span><br><span class="line"><span class="attr">  version:</span> <span class="string">v1alpha1</span></span><br><span class="line"><span class="attr">  names:</span></span><br><span class="line"><span class="attr">    kind:</span> <span class="string">IngressRouteTCP</span></span><br><span class="line"><span class="attr">    plural:</span> <span class="string">ingressroutetcps</span></span><br><span class="line"><span class="attr">    singular:</span> <span class="string">ingressroutetcp</span></span><br><span class="line"><span class="attr">  scope:</span> <span class="string">Namespaced</span></span><br><span class="line"></span><br><span class="line"><span class="meta">---</span></span><br><span class="line"><span class="attr">apiVersion:</span> <span class="string">apiextensions.k8s.io/v1beta1</span></span><br><span class="line"><span class="attr">kind:</span> <span class="string">CustomResourceDefinition</span></span><br><span class="line"><span class="attr">metadata:</span></span><br><span class="line"><span class="attr">  name:</span> <span class="string">tlsoptions.traefik.containo.us</span></span><br><span class="line"></span><br><span class="line"><span class="attr">spec:</span></span><br><span class="line"><span class="attr">  group:</span> <span class="string">traefik.containo.us</span></span><br><span class="line"><span class="attr">  version:</span> <span class="string">v1alpha1</span></span><br><span class="line"><span class="attr">  names:</span></span><br><span class="line"><span class="attr">    kind:</span> <span class="string">TLSOption</span></span><br><span class="line"><span class="attr">    plural:</span> <span class="string">tlsoptions</span></span><br><span class="line"><span class="attr">    singular:</span> <span class="string">tlsoption</span></span><br><span class="line"><span class="attr">  scope:</span> <span class="string">Namespaced</span></span><br><span class="line"></span><br><span class="line"><span class="meta">---</span></span><br><span class="line"><span class="attr">apiVersion:</span> <span class="string">apiextensions.k8s.io/v1beta1</span></span><br><span class="line"><span class="attr">kind:</span> <span class="string">CustomResourceDefinition</span></span><br><span class="line"><span class="attr">metadata:</span></span><br><span class="line"><span class="attr">  name:</span> <span class="string">traefikservices.traefik.containo.us</span></span><br><span class="line"></span><br><span class="line"><span class="attr">spec:</span></span><br><span class="line"><span class="attr">  group:</span> <span class="string">traefik.containo.us</span></span><br><span class="line"><span class="attr">  version:</span> <span class="string">v1alpha1</span></span><br><span class="line"><span class="attr">  names:</span></span><br><span class="line"><span class="attr">    kind:</span> <span class="string">TraefikService</span></span><br><span class="line"><span class="attr">    plural:</span> <span class="string">traefikservices</span></span><br><span class="line"><span class="attr">    singular:</span> <span class="string">traefikservice</span></span><br><span class="line"><span class="attr">  scope:</span> <span class="string">Namespaced</span></span><br></pre></td></tr></table></figure><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[root@kube-master-1 yaml]# cat 1.traefik-rbac.yaml</span><br></pre></td></tr></table></figure><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">kind:</span> <span class="string">ClusterRole</span></span><br><span class="line"><span class="attr">apiVersion:</span> <span class="string">rbac.authorization.k8s.io/v1beta1</span></span><br><span class="line"><span class="attr">metadata:</span></span><br><span class="line"><span class="attr">  name:</span> <span class="string">traefik-ingress-controller</span></span><br><span class="line"></span><br><span class="line"><span class="attr">rules:</span></span><br><span class="line"><span class="attr">  - apiGroups:</span></span><br><span class="line"><span class="bullet">      -</span> <span class="string">""</span></span><br><span class="line"><span class="attr">    resources:</span></span><br><span class="line"><span class="bullet">      -</span> <span class="string">services</span></span><br><span class="line"><span class="bullet">      -</span> <span class="string">endpoints</span></span><br><span class="line"><span class="bullet">      -</span> <span class="string">secrets</span></span><br><span class="line"><span class="attr">    verbs:</span></span><br><span class="line"><span class="bullet">      -</span> <span class="string">get</span></span><br><span class="line"><span class="bullet">      -</span> <span class="string">list</span></span><br><span class="line"><span class="bullet">      -</span> <span class="string">watch</span></span><br><span class="line"><span class="attr">  - apiGroups:</span></span><br><span class="line"><span class="bullet">      -</span> <span class="string">extensions</span></span><br><span class="line"><span class="attr">    resources:</span></span><br><span class="line"><span class="bullet">      -</span> <span class="string">ingresses</span></span><br><span class="line"><span class="attr">    verbs:</span></span><br><span class="line"><span class="bullet">      -</span> <span class="string">get</span></span><br><span class="line"><span class="bullet">      -</span> <span class="string">list</span></span><br><span class="line"><span class="bullet">      -</span> <span class="string">watch</span></span><br><span class="line"><span class="attr">  - apiGroups:</span></span><br><span class="line"><span class="bullet">      -</span> <span class="string">extensions</span></span><br><span class="line"><span class="attr">    resources:</span></span><br><span class="line"><span class="bullet">      -</span> <span class="string">ingresses/status</span></span><br><span class="line"><span class="attr">    verbs:</span></span><br><span class="line"><span class="bullet">      -</span> <span class="string">update</span></span><br><span class="line"><span class="attr">  - apiGroups:</span></span><br><span class="line"><span class="bullet">      -</span> <span class="string">traefik.containo.us</span></span><br><span class="line"><span class="attr">    resources:</span></span><br><span class="line"><span class="bullet">      -</span> <span class="string">middlewares</span></span><br><span class="line"><span class="attr">    verbs:</span></span><br><span class="line"><span class="bullet">      -</span> <span class="string">get</span></span><br><span class="line"><span class="bullet">      -</span> <span class="string">list</span></span><br><span class="line"><span class="bullet">      -</span> <span class="string">watch</span></span><br><span class="line"><span class="attr">  - apiGroups:</span></span><br><span class="line"><span class="bullet">      -</span> <span class="string">traefik.containo.us</span></span><br><span class="line"><span class="attr">    resources:</span></span><br><span class="line"><span class="bullet">      -</span> <span class="string">ingressroutes</span></span><br><span class="line"><span class="attr">    verbs:</span></span><br><span class="line"><span class="bullet">      -</span> <span class="string">get</span></span><br><span class="line"><span class="bullet">      -</span> <span class="string">list</span></span><br><span class="line"><span class="bullet">      -</span> <span class="string">watch</span></span><br><span class="line"><span class="attr">  - apiGroups:</span></span><br><span class="line"><span class="bullet">      -</span> <span class="string">traefik.containo.us</span></span><br><span class="line"><span class="attr">    resources:</span></span><br><span class="line"><span class="bullet">      -</span> <span class="string">ingressroutetcps</span></span><br><span class="line"><span class="attr">    verbs:</span></span><br><span class="line"><span class="bullet">      -</span> <span class="string">get</span></span><br><span class="line"><span class="bullet">      -</span> <span class="string">list</span></span><br><span class="line"><span class="bullet">      -</span> <span class="string">watch</span></span><br><span class="line"><span class="attr">  - apiGroups:</span></span><br><span class="line"><span class="bullet">      -</span> <span class="string">traefik.containo.us</span></span><br><span class="line"><span class="attr">    resources:</span></span><br><span class="line"><span class="bullet">      -</span> <span class="string">tlsoptions</span></span><br><span class="line"><span class="attr">    verbs:</span></span><br><span class="line"><span class="bullet">      -</span> <span class="string">get</span></span><br><span class="line"><span class="bullet">      -</span> <span class="string">list</span></span><br><span class="line"><span class="bullet">      -</span> <span class="string">watch</span></span><br><span class="line"><span class="attr">  - apiGroups:</span></span><br><span class="line"><span class="bullet">      -</span> <span class="string">traefik.containo.us</span></span><br><span class="line"><span class="attr">    resources:</span></span><br><span class="line"><span class="bullet">      -</span> <span class="string">traefikservices</span></span><br><span class="line"><span class="attr">    verbs:</span></span><br><span class="line"><span class="bullet">      -</span> <span class="string">get</span></span><br><span class="line"><span class="bullet">      -</span> <span class="string">list</span></span><br><span class="line"><span class="bullet">      -</span> <span class="string">watch</span></span><br></pre></td></tr></table></figure><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[root@kube-master-1 yaml]# cat 2.traefik-sa.yaml</span><br></pre></td></tr></table></figure><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">apiVersion:</span> <span class="string">v1</span></span><br><span class="line"><span class="attr">kind:</span> <span class="string">ServiceAccount</span></span><br><span class="line"><span class="attr">metadata:</span></span><br><span class="line"><span class="attr">  namespace:</span> <span class="string">default</span></span><br><span class="line"><span class="attr">  name:</span> <span class="string">traefik-ingress-controller</span></span><br><span class="line"></span><br><span class="line"><span class="meta">---</span></span><br><span class="line"><span class="attr">kind:</span> <span class="string">ClusterRoleBinding</span></span><br><span class="line"><span class="attr">apiVersion:</span> <span class="string">rbac.authorization.k8s.io/v1beta1</span></span><br><span class="line"><span class="attr">metadata:</span></span><br><span class="line"><span class="attr">  name:</span> <span class="string">traefik-ingress-controller</span></span><br><span class="line"></span><br><span class="line"><span class="attr">roleRef:</span></span><br><span class="line"><span class="attr">  apiGroup:</span> <span class="string">rbac.authorization.k8s.io</span></span><br><span class="line"><span class="attr">  kind:</span> <span class="string">ClusterRole</span></span><br><span class="line"><span class="attr">  name:</span> <span class="string">traefik-ingress-controller</span></span><br><span class="line"><span class="attr">subjects:</span></span><br><span class="line"><span class="attr">  - kind:</span> <span class="string">ServiceAccount</span></span><br><span class="line"><span class="attr">    name:</span> <span class="string">traefik-ingress-controller</span></span><br><span class="line"><span class="attr">    namespace:</span> <span class="string">default</span></span><br></pre></td></tr></table></figure><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[root@kube-master-1 yaml]# cat 3.traefik-deployment.yaml</span><br></pre></td></tr></table></figure><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">kind:</span> <span class="string">Deployment</span></span><br><span class="line"><span class="attr">apiVersion:</span> <span class="string">apps/v1</span></span><br><span class="line"><span class="attr">metadata:</span></span><br><span class="line"><span class="attr">  namespace:</span> <span class="string">default</span></span><br><span class="line"><span class="attr">  name:</span> <span class="string">traefik</span></span><br><span class="line"><span class="attr">  labels:</span></span><br><span class="line"><span class="attr">    app:</span> <span class="string">traefik</span></span><br><span class="line"></span><br><span class="line"><span class="attr">spec:</span></span><br><span class="line"><span class="attr">  replicas:</span> <span class="number">1</span></span><br><span class="line"><span class="attr">  selector:</span></span><br><span class="line"><span class="attr">    matchLabels:</span></span><br><span class="line"><span class="attr">      app:</span> <span class="string">traefik</span></span><br><span class="line"><span class="attr">  template:</span></span><br><span class="line"><span class="attr">    metadata:</span></span><br><span class="line"><span class="attr">      labels:</span></span><br><span class="line"><span class="attr">        app:</span> <span class="string">traefik</span></span><br><span class="line"><span class="attr">    spec:</span></span><br><span class="line"><span class="attr">      serviceAccountName:</span> <span class="string">traefik-ingress-controller</span></span><br><span class="line"><span class="attr">      containers:</span></span><br><span class="line"><span class="attr">        - name:</span> <span class="string">traefik</span></span><br><span class="line"><span class="attr">          image:</span> <span class="string">dockerhub.azk8s.cn/library/traefik:latest</span></span><br><span class="line"><span class="attr">          args:</span></span><br><span class="line"><span class="bullet">            -</span> <span class="bullet">--api=true</span></span><br><span class="line"><span class="bullet">            -</span> <span class="bullet">--api.insecure=true</span></span><br><span class="line"><span class="bullet">            -</span> <span class="bullet">--api.dashboard=true</span></span><br><span class="line"><span class="bullet">            -</span> <span class="bullet">--accesslog=true</span></span><br><span class="line">            <span class="comment"># entryPoints</span></span><br><span class="line"><span class="bullet">            -</span> <span class="bullet">--entryPoints.web.address=:80</span></span><br><span class="line">            <span class="comment"># - --entryPoints.websecure.address=:443</span></span><br><span class="line"><span class="bullet">            -</span> <span class="bullet">--ping=true</span></span><br><span class="line"><span class="bullet">            -</span> <span class="bullet">--providers.kubernetesingress</span></span><br><span class="line"><span class="bullet">            -</span> <span class="bullet">--providers.kubernetescrd</span></span><br><span class="line">            <span class="comment">#- --entryPoints.ping.address=:8082</span></span><br><span class="line">            <span class="comment">#- --ping.entryPoint=ping</span></span><br><span class="line"><span class="bullet">            -</span> <span class="bullet">--serversTransport.insecureSkipVerify=true</span></span><br><span class="line"><span class="bullet">            -</span> <span class="bullet">--log.level=INFO</span></span><br><span class="line"><span class="bullet">            -</span> <span class="bullet">--accesslog</span></span><br><span class="line"><span class="attr">          ports:</span></span><br><span class="line"><span class="attr">          - name:</span> <span class="string">web</span></span><br><span class="line"><span class="attr">            containerPort:</span> <span class="number">80</span></span><br><span class="line"><span class="attr">            hostPort:</span> <span class="number">80</span></span><br><span class="line"><span class="attr">          - name:</span> <span class="string">admin</span></span><br><span class="line"><span class="attr">            containerPort:</span> <span class="number">8080</span></span><br><span class="line"><span class="attr">          - name:</span> <span class="string">websecure</span></span><br><span class="line"><span class="attr">containerPort:</span> <span class="number">443</span></span><br><span class="line"><span class="attr">          resources:</span></span><br><span class="line"><span class="attr">            requests:</span></span><br><span class="line"><span class="attr">              cpu:</span> <span class="string">"50m"</span></span><br><span class="line"><span class="attr">              memory:</span> <span class="string">"50Mi"</span></span><br><span class="line"><span class="attr">            limits:</span></span><br><span class="line"><span class="attr">              cpu:</span> <span class="string">"200m"</span></span><br><span class="line"><span class="attr">              memory:</span> <span class="string">"100Mi"</span></span><br><span class="line"><span class="attr">          securityContext:</span></span><br><span class="line"><span class="attr">            allowPrivilegeEscalation:</span> <span class="literal">true</span></span><br><span class="line"><span class="attr">            capabilities:</span></span><br><span class="line"><span class="attr">              drop:</span></span><br><span class="line"><span class="bullet">              -</span> <span class="string">ALL</span></span><br><span class="line"><span class="attr">              add:</span></span><br><span class="line"><span class="bullet">              -</span> <span class="string">NET_BIND_SERVICE</span></span><br><span class="line"><span class="attr">          readinessProbe:</span></span><br><span class="line"><span class="attr">            httpGet:</span></span><br><span class="line"><span class="attr">              path:</span> <span class="string">/ping</span></span><br><span class="line"><span class="attr">              port:</span> <span class="number">8080</span></span><br><span class="line"><span class="attr">            failureThreshold:</span> <span class="number">1</span></span><br><span class="line"><span class="attr">            initialDelaySeconds:</span> <span class="number">10</span></span><br><span class="line"><span class="attr">            periodSeconds:</span> <span class="number">10</span></span><br><span class="line"><span class="attr">            successThreshold:</span> <span class="number">1</span></span><br><span class="line"><span class="attr">            timeoutSeconds:</span> <span class="number">2</span></span><br><span class="line"><span class="attr">          livenessProbe:</span></span><br><span class="line"><span class="attr">            httpGet:</span></span><br><span class="line"><span class="attr">              path:</span> <span class="string">/ping</span></span><br><span class="line"><span class="attr">              port:</span> <span class="number">8080</span></span><br><span class="line"><span class="attr">            failureThreshold:</span> <span class="number">3</span></span><br><span class="line"><span class="attr">            initialDelaySeconds:</span> <span class="number">10</span></span><br><span class="line"><span class="attr">            periodSeconds:</span> <span class="number">10</span></span><br><span class="line"><span class="attr">            successThreshold:</span> <span class="number">1</span></span><br><span class="line"><span class="attr">            timeoutSeconds:</span> <span class="number">2</span></span><br></pre></td></tr></table></figure><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[root@kube-master-1 yaml]# cat 4.traefik-service.yaml</span><br></pre></td></tr></table></figure><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">apiVersion:</span> <span class="string">v1</span></span><br><span class="line"><span class="attr">kind:</span> <span class="string">Service</span></span><br><span class="line"><span class="attr">metadata:</span></span><br><span class="line"><span class="attr">  name:</span> <span class="string">traefik</span></span><br><span class="line"><span class="attr">spec:</span></span><br><span class="line"><span class="attr">  type:</span> <span class="string">NodePort</span></span><br><span class="line"><span class="attr">  ports:</span></span><br><span class="line"><span class="attr">    - protocol:</span> <span class="string">TCP</span></span><br><span class="line"><span class="attr">      name:</span> <span class="string">web</span></span><br><span class="line"><span class="attr">      port:</span> <span class="number">80</span></span><br><span class="line"><span class="attr">      targetPort:</span> <span class="number">80</span></span><br><span class="line"><span class="attr">    - protocol:</span> <span class="string">TCP</span></span><br><span class="line"><span class="attr">      name:</span> <span class="string">websecure</span></span><br><span class="line"><span class="attr">      port:</span> <span class="number">443</span></span><br><span class="line"><span class="attr">      targetPort:</span> <span class="number">443</span></span><br><span class="line"><span class="attr">  selector:</span></span><br><span class="line"><span class="attr">    app:</span> <span class="string">traefik</span></span><br></pre></td></tr></table></figure><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[root@kube-master-1 yaml]# cat 5.traefik-dashboard.yaml</span><br></pre></td></tr></table></figure><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">apiVersion:</span> <span class="string">traefik.containo.us/v1alpha1</span></span><br><span class="line"><span class="attr">kind:</span> <span class="string">IngressRoute</span></span><br><span class="line"><span class="attr">metadata:</span></span><br><span class="line"><span class="attr">  name:</span> <span class="string">traefik-dashboard</span></span><br><span class="line"><span class="attr">spec:</span></span><br><span class="line"><span class="attr">  routes:</span></span><br><span class="line"><span class="attr">  - match:</span> <span class="string">Host(`traefik.t.io`)</span></span><br><span class="line"><span class="attr">    kind:</span> <span class="string">Rule</span></span><br><span class="line"><span class="attr">    services:</span></span><br><span class="line"><span class="attr">    - name:</span> <span class="string">api@internal</span></span><br><span class="line"><span class="attr">      kind:</span> <span class="string">TraefikService</span></span><br></pre></td></tr></table></figure><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[root@kube-master-1 yaml]# cat 6.kubernetes-dashboard.yaml</span><br></pre></td></tr></table></figure><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br><span class="line">225</span><br><span class="line">226</span><br><span class="line">227</span><br><span class="line">228</span><br><span class="line">229</span><br><span class="line">230</span><br><span class="line">231</span><br><span class="line">232</span><br><span class="line">233</span><br><span class="line">234</span><br><span class="line">235</span><br><span class="line">236</span><br><span class="line">237</span><br><span class="line">238</span><br><span class="line">239</span><br><span class="line">240</span><br><span class="line">241</span><br><span class="line">242</span><br><span class="line">243</span><br><span class="line">244</span><br><span class="line">245</span><br><span class="line">246</span><br><span class="line">247</span><br><span class="line">248</span><br><span class="line">249</span><br><span class="line">250</span><br><span class="line">251</span><br><span class="line">252</span><br><span class="line">253</span><br><span class="line">254</span><br><span class="line">255</span><br><span class="line">256</span><br><span class="line">257</span><br><span class="line">258</span><br><span class="line">259</span><br><span class="line">260</span><br><span class="line">261</span><br><span class="line">262</span><br><span class="line">263</span><br><span class="line">264</span><br><span class="line">265</span><br><span class="line">266</span><br><span class="line">267</span><br><span class="line">268</span><br><span class="line">269</span><br><span class="line">270</span><br><span class="line">271</span><br><span class="line">272</span><br><span class="line">273</span><br><span class="line">274</span><br><span class="line">275</span><br><span class="line">276</span><br><span class="line">277</span><br><span class="line">278</span><br><span class="line">279</span><br><span class="line">280</span><br><span class="line">281</span><br><span class="line">282</span><br><span class="line">283</span><br><span class="line">284</span><br><span class="line">285</span><br><span class="line">286</span><br><span class="line">287</span><br><span class="line">288</span><br><span class="line">289</span><br><span class="line">290</span><br><span class="line">291</span><br><span class="line">292</span><br><span class="line">293</span><br><span class="line">294</span><br><span class="line">295</span><br><span class="line">296</span><br><span class="line">297</span><br><span class="line">298</span><br><span class="line">299</span><br><span class="line">300</span><br><span class="line">301</span><br><span class="line">302</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># Copyright 2017 The Kubernetes Authors.</span></span><br><span class="line"><span class="comment">#</span></span><br><span class="line"><span class="comment"># Licensed under the Apache License, Version 2.0 (the "License");</span></span><br><span class="line"><span class="comment"># you may not use this file except in compliance with the License.</span></span><br><span class="line"><span class="comment"># You may obtain a copy of the License at</span></span><br><span class="line"><span class="comment">#</span></span><br><span class="line"><span class="comment">#     http://www.apache.org/licenses/LICENSE-2.0</span></span><br><span class="line"><span class="comment">#</span></span><br><span class="line"><span class="comment"># Unless required by applicable law or agreed to in writing, software</span></span><br><span class="line"><span class="comment"># distributed under the License is distributed on an "AS IS" BASIS,</span></span><br><span class="line"><span class="comment"># WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.</span></span><br><span class="line"><span class="comment"># See the License for the specific language governing permissions and</span></span><br><span class="line"><span class="comment"># limitations under the License.</span></span><br><span class="line"></span><br><span class="line"><span class="attr">apiVersion:</span> <span class="string">v1</span></span><br><span class="line"><span class="attr">kind:</span> <span class="string">Namespace</span></span><br><span class="line"><span class="attr">metadata:</span></span><br><span class="line"><span class="attr">  name:</span> <span class="string">kubernetes-dashboard</span></span><br><span class="line"></span><br><span class="line"><span class="meta">---</span></span><br><span class="line"></span><br><span class="line"><span class="attr">apiVersion:</span> <span class="string">v1</span></span><br><span class="line"><span class="attr">kind:</span> <span class="string">ServiceAccount</span></span><br><span class="line"><span class="attr">metadata:</span></span><br><span class="line"><span class="attr">  labels:</span></span><br><span class="line"><span class="attr">    k8s-app:</span> <span class="string">kubernetes-dashboard</span></span><br><span class="line"><span class="attr">  name:</span> <span class="string">kubernetes-dashboard</span></span><br><span class="line"><span class="attr">  namespace:</span> <span class="string">kubernetes-dashboard</span></span><br><span class="line"></span><br><span class="line"><span class="meta">---</span></span><br><span class="line"></span><br><span class="line"><span class="attr">kind:</span> <span class="string">Service</span></span><br><span class="line"><span class="attr">apiVersion:</span> <span class="string">v1</span></span><br><span class="line"><span class="attr">metadata:</span></span><br><span class="line"><span class="attr">  labels:</span></span><br><span class="line"><span class="attr">    k8s-app:</span> <span class="string">kubernetes-dashboard</span></span><br><span class="line"><span class="attr">  name:</span> <span class="string">kubernetes-dashboard</span></span><br><span class="line"><span class="attr">  namespace:</span> <span class="string">kubernetes-dashboard</span></span><br><span class="line"><span class="attr">spec:</span></span><br><span class="line"><span class="attr">  ports:</span></span><br><span class="line"><span class="attr">    - port:</span> <span class="number">443</span></span><br><span class="line"><span class="attr">      targetPort:</span> <span class="number">8443</span></span><br><span class="line"><span class="attr">  selector:</span></span><br><span class="line"><span class="attr">    k8s-app:</span> <span class="string">kubernetes-dashboard</span></span><br><span class="line"></span><br><span class="line"><span class="meta">---</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#apiVersion: v1</span></span><br><span class="line"><span class="comment">#kind: Secret</span></span><br><span class="line"><span class="comment">#metadata:</span></span><br><span class="line"><span class="comment">#  labels:</span></span><br><span class="line"><span class="comment">#    k8s-app: kubernetes-dashboard</span></span><br><span class="line"><span class="comment">#  name: kubernetes-dashboard-certs</span></span><br><span class="line"><span class="comment">#  namespace: kubernetes-dashboard</span></span><br><span class="line"><span class="comment">#type: Opaque</span></span><br><span class="line"><span class="comment">#</span></span><br><span class="line"><span class="comment">#---</span></span><br><span class="line"></span><br><span class="line"><span class="attr">apiVersion:</span> <span class="string">v1</span></span><br><span class="line"><span class="attr">kind:</span> <span class="string">Secret</span></span><br><span class="line"><span class="attr">metadata:</span></span><br><span class="line"><span class="attr">  labels:</span></span><br><span class="line"><span class="attr">    k8s-app:</span> <span class="string">kubernetes-dashboard</span></span><br><span class="line"><span class="attr">  name:</span> <span class="string">kubernetes-dashboard-csrf</span></span><br><span class="line"><span class="attr">  namespace:</span> <span class="string">kubernetes-dashboard</span></span><br><span class="line"><span class="attr">type:</span> <span class="string">Opaque</span></span><br><span class="line"><span class="attr">data:</span></span><br><span class="line"><span class="attr">  csrf:</span> <span class="string">""</span></span><br><span class="line"></span><br><span class="line"><span class="meta">---</span></span><br><span class="line"></span><br><span class="line"><span class="attr">apiVersion:</span> <span class="string">v1</span></span><br><span class="line"><span class="attr">kind:</span> <span class="string">Secret</span></span><br><span class="line"><span class="attr">metadata:</span></span><br><span class="line"><span class="attr">  labels:</span></span><br><span class="line"><span class="attr">    k8s-app:</span> <span class="string">kubernetes-dashboard</span></span><br><span class="line"><span class="attr">  name:</span> <span class="string">kubernetes-dashboard-key-holder</span></span><br><span class="line"><span class="attr">  namespace:</span> <span class="string">kubernetes-dashboard</span></span><br><span class="line"><span class="attr">type:</span> <span class="string">Opaque</span></span><br><span class="line"></span><br><span class="line"><span class="meta">---</span></span><br><span class="line"></span><br><span class="line"><span class="attr">kind:</span> <span class="string">ConfigMap</span></span><br><span class="line"><span class="attr">apiVersion:</span> <span class="string">v1</span></span><br><span class="line"><span class="attr">metadata:</span></span><br><span class="line"><span class="attr">  labels:</span></span><br><span class="line"><span class="attr">    k8s-app:</span> <span class="string">kubernetes-dashboard</span></span><br><span class="line"><span class="attr">  name:</span> <span class="string">kubernetes-dashboard-settings</span></span><br><span class="line"><span class="attr">  namespace:</span> <span class="string">kubernetes-dashboard</span></span><br><span class="line"></span><br><span class="line"><span class="meta">---</span></span><br><span class="line"></span><br><span class="line"><span class="attr">kind:</span> <span class="string">Role</span></span><br><span class="line"><span class="attr">apiVersion:</span> <span class="string">rbac.authorization.k8s.io/v1</span></span><br><span class="line"><span class="attr">metadata:</span></span><br><span class="line"><span class="attr">  labels:</span></span><br><span class="line"><span class="attr">    k8s-app:</span> <span class="string">kubernetes-dashboard</span></span><br><span class="line"><span class="attr">  name:</span> <span class="string">kubernetes-dashboard</span></span><br><span class="line"><span class="attr">  namespace:</span> <span class="string">kubernetes-dashboard</span></span><br><span class="line"><span class="attr">rules:</span></span><br><span class="line">  <span class="comment"># Allow Dashboard to get, update and delete Dashboard exclusive secrets.</span></span><br><span class="line"><span class="attr">  - apiGroups:</span> <span class="string">[""]</span></span><br><span class="line"><span class="attr">    resources:</span> <span class="string">["secrets"]</span></span><br><span class="line"><span class="attr">    resourceNames:</span> <span class="string">["kubernetes-dashboard-key-holder",</span> <span class="string">"kubernetes-dashboard-certs"</span><span class="string">,</span> <span class="string">"kubernetes-dashboard-csrf"</span><span class="string">]</span></span><br><span class="line"><span class="attr">    verbs:</span> <span class="string">["get",</span> <span class="string">"update"</span><span class="string">,</span> <span class="string">"delete"</span><span class="string">]</span></span><br><span class="line">    <span class="comment"># Allow Dashboard to get and update 'kubernetes-dashboard-settings' config map.</span></span><br><span class="line"><span class="attr">  - apiGroups:</span> <span class="string">[""]</span></span><br><span class="line"><span class="attr">    resources:</span> <span class="string">["configmaps"]</span></span><br><span class="line"><span class="attr">    resourceNames:</span> <span class="string">["kubernetes-dashboard-settings"]</span></span><br><span class="line"><span class="attr">    verbs:</span> <span class="string">["get",</span> <span class="string">"update"</span><span class="string">]</span></span><br><span class="line">    <span class="comment"># Allow Dashboard to get metrics.</span></span><br><span class="line"><span class="attr">  - apiGroups:</span> <span class="string">[""]</span></span><br><span class="line"><span class="attr">    resources:</span> <span class="string">["services"]</span></span><br><span class="line"><span class="attr">    resourceNames:</span> <span class="string">["heapster",</span> <span class="string">"dashboard-metrics-scraper"</span><span class="string">]</span></span><br><span class="line"><span class="attr">    verbs:</span> <span class="string">["proxy"]</span></span><br><span class="line"><span class="attr">  - apiGroups:</span> <span class="string">[""]</span></span><br><span class="line"><span class="attr">    resources:</span> <span class="string">["services/proxy"]</span></span><br><span class="line"><span class="attr">    resourceNames:</span> <span class="string">["heapster",</span> <span class="string">"http:heapster:"</span><span class="string">,</span> <span class="string">"https:heapster:"</span><span class="string">,</span> <span class="string">"dashboard-metrics-scraper"</span><span class="string">,</span> <span class="string">"http:dashboard-metrics-scraper"</span><span class="string">]</span></span><br><span class="line"><span class="attr">    verbs:</span> <span class="string">["get"]</span></span><br><span class="line"></span><br><span class="line"><span class="meta">---</span></span><br><span class="line"></span><br><span class="line"><span class="attr">kind:</span> <span class="string">ClusterRole</span></span><br><span class="line"><span class="attr">apiVersion:</span> <span class="string">rbac.authorization.k8s.io/v1</span></span><br><span class="line"><span class="attr">metadata:</span></span><br><span class="line"><span class="attr">  labels:</span></span><br><span class="line"><span class="attr">    k8s-app:</span> <span class="string">kubernetes-dashboard</span></span><br><span class="line"><span class="attr">  name:</span> <span class="string">kubernetes-dashboard</span></span><br><span class="line"><span class="attr">rules:</span></span><br><span class="line">  <span class="comment"># Allow Metrics Scraper to get metrics from the Metrics server</span></span><br><span class="line"><span class="attr">  - apiGroups:</span> <span class="string">["metrics.k8s.io"]</span></span><br><span class="line"><span class="attr">    resources:</span> <span class="string">["pods",</span> <span class="string">"nodes"</span><span class="string">]</span></span><br><span class="line"><span class="attr">    verbs:</span> <span class="string">["get",</span> <span class="string">"list"</span><span class="string">,</span> <span class="string">"watch"</span><span class="string">]</span></span><br><span class="line"></span><br><span class="line"><span class="meta">---</span></span><br><span class="line"></span><br><span class="line"><span class="attr">apiVersion:</span> <span class="string">rbac.authorization.k8s.io/v1</span></span><br><span class="line"><span class="attr">kind:</span> <span class="string">RoleBinding</span></span><br><span class="line"><span class="attr">metadata:</span></span><br><span class="line"><span class="attr">  labels:</span></span><br><span class="line"><span class="attr">    k8s-app:</span> <span class="string">kubernetes-dashboard</span></span><br><span class="line"><span class="attr">  name:</span> <span class="string">kubernetes-dashboard</span></span><br><span class="line"><span class="attr">  namespace:</span> <span class="string">kubernetes-dashboard</span></span><br><span class="line"><span class="attr">roleRef:</span></span><br><span class="line"><span class="attr">  apiGroup:</span> <span class="string">rbac.authorization.k8s.io</span></span><br><span class="line"><span class="attr">  kind:</span> <span class="string">Role</span></span><br><span class="line"><span class="attr">  name:</span> <span class="string">kubernetes-dashboard</span></span><br><span class="line"><span class="attr">subjects:</span></span><br><span class="line"><span class="attr">  - kind:</span> <span class="string">ServiceAccount</span></span><br><span class="line"><span class="attr">    name:</span> <span class="string">kubernetes-dashboard</span></span><br><span class="line"><span class="attr">    namespace:</span> <span class="string">kubernetes-dashboard</span></span><br><span class="line"></span><br><span class="line"><span class="meta">---</span></span><br><span class="line"></span><br><span class="line"><span class="attr">apiVersion:</span> <span class="string">rbac.authorization.k8s.io/v1</span></span><br><span class="line"><span class="attr">kind:</span> <span class="string">ClusterRoleBinding</span></span><br><span class="line"><span class="attr">metadata:</span></span><br><span class="line"><span class="attr">  name:</span> <span class="string">kubernetes-dashboard</span></span><br><span class="line"><span class="attr">roleRef:</span></span><br><span class="line"><span class="attr">  apiGroup:</span> <span class="string">rbac.authorization.k8s.io</span></span><br><span class="line"><span class="attr">  kind:</span> <span class="string">ClusterRole</span></span><br><span class="line"><span class="attr">  name:</span> <span class="string">kubernetes-dashboard</span></span><br><span class="line"><span class="attr">subjects:</span></span><br><span class="line"><span class="attr">  - kind:</span> <span class="string">ServiceAccount</span></span><br><span class="line"><span class="attr">    name:</span> <span class="string">kubernetes-dashboard</span></span><br><span class="line"><span class="attr">    namespace:</span> <span class="string">kubernetes-dashboard</span></span><br><span class="line"></span><br><span class="line"><span class="meta">---</span></span><br><span class="line"></span><br><span class="line"><span class="attr">kind:</span> <span class="string">Deployment</span></span><br><span class="line"><span class="attr">apiVersion:</span> <span class="string">apps/v1</span></span><br><span class="line"><span class="attr">metadata:</span></span><br><span class="line"><span class="attr">  labels:</span></span><br><span class="line"><span class="attr">    k8s-app:</span> <span class="string">kubernetes-dashboard</span></span><br><span class="line"><span class="attr">  name:</span> <span class="string">kubernetes-dashboard</span></span><br><span class="line"><span class="attr">  namespace:</span> <span class="string">kubernetes-dashboard</span></span><br><span class="line"><span class="attr">spec:</span></span><br><span class="line"><span class="attr">  replicas:</span> <span class="number">1</span></span><br><span class="line"><span class="attr">  revisionHistoryLimit:</span> <span class="number">10</span></span><br><span class="line"><span class="attr">  selector:</span></span><br><span class="line"><span class="attr">    matchLabels:</span></span><br><span class="line"><span class="attr">      k8s-app:</span> <span class="string">kubernetes-dashboard</span></span><br><span class="line"><span class="attr">  template:</span></span><br><span class="line"><span class="attr">    metadata:</span></span><br><span class="line"><span class="attr">      labels:</span></span><br><span class="line"><span class="attr">        k8s-app:</span> <span class="string">kubernetes-dashboard</span></span><br><span class="line"><span class="attr">    spec:</span></span><br><span class="line"><span class="attr">      containers:</span></span><br><span class="line"><span class="attr">        - name:</span> <span class="string">kubernetes-dashboard</span></span><br><span class="line"><span class="attr">          image:</span> <span class="string">kubernetesui/dashboard:v2.0.0-rc1</span></span><br><span class="line"><span class="attr">          imagePullPolicy:</span> <span class="string">Always</span></span><br><span class="line"><span class="attr">          ports:</span></span><br><span class="line"><span class="attr">            - containerPort:</span> <span class="number">8443</span></span><br><span class="line"><span class="attr">              protocol:</span> <span class="string">TCP</span></span><br><span class="line"><span class="attr">          args:</span></span><br><span class="line"><span class="bullet">            -</span> <span class="bullet">--auto-generate-certificates</span></span><br><span class="line"><span class="bullet">            -</span> <span class="bullet">--namespace=kubernetes-dashboard</span></span><br><span class="line">            <span class="comment"># Uncomment the following line to manually specify Kubernetes API server Host</span></span><br><span class="line">            <span class="comment"># If not specified, Dashboard will attempt to auto discover the API server and connect</span></span><br><span class="line">            <span class="comment"># to it. Uncomment only if the default does not work.</span></span><br><span class="line">            <span class="comment"># - --apiserver-host=http://my-address:port</span></span><br><span class="line"><span class="attr">          volumeMounts:</span></span><br><span class="line"><span class="attr">            - name:</span> <span class="string">kubernetes-dashboard-certs</span></span><br><span class="line"><span class="attr">              mountPath:</span> <span class="string">/certs</span></span><br><span class="line">              <span class="comment"># Create on-disk volume to store exec logs</span></span><br><span class="line"><span class="attr">            - mountPath:</span> <span class="string">/tmp</span></span><br><span class="line"><span class="attr">              name:</span> <span class="string">tmp-volume</span></span><br><span class="line"><span class="attr">          livenessProbe:</span></span><br><span class="line"><span class="attr">            httpGet:</span></span><br><span class="line"><span class="attr">              scheme:</span> <span class="string">HTTPS</span></span><br><span class="line"><span class="attr">              path:</span> <span class="string">/</span></span><br><span class="line"><span class="attr">              port:</span> <span class="number">8443</span></span><br><span class="line"><span class="attr">            initialDelaySeconds:</span> <span class="number">30</span></span><br><span class="line"><span class="attr">            timeoutSeconds:</span> <span class="number">30</span></span><br><span class="line"><span class="attr">          securityContext:</span></span><br><span class="line"><span class="attr">            allowPrivilegeEscalation:</span> <span class="literal">false</span></span><br><span class="line"><span class="attr">            readOnlyRootFilesystem:</span> <span class="literal">true</span></span><br><span class="line"><span class="attr">            runAsUser:</span> <span class="number">1001</span></span><br><span class="line"><span class="attr">            runAsGroup:</span> <span class="number">2001</span></span><br><span class="line"><span class="attr">      volumes:</span></span><br><span class="line"><span class="attr">        - name:</span> <span class="string">kubernetes-dashboard-certs</span></span><br><span class="line"><span class="attr">          secret:</span></span><br><span class="line"><span class="attr">            secretName:</span> <span class="string">kubernetes-dashboard-certs</span></span><br><span class="line"><span class="attr">        - name:</span> <span class="string">tmp-volume</span></span><br><span class="line"><span class="attr">          emptyDir:</span> <span class="string">&#123;&#125;</span></span><br><span class="line"><span class="attr">      serviceAccountName:</span> <span class="string">kubernetes-dashboard</span></span><br><span class="line"><span class="attr">      nodeSelector:</span></span><br><span class="line">        <span class="string">"beta.kubernetes.io/os"</span><span class="string">:</span> <span class="string">linux</span></span><br><span class="line">      <span class="comment"># Comment the following tolerations if Dashboard must not be deployed on master</span></span><br><span class="line"><span class="attr">      tolerations:</span></span><br><span class="line"><span class="attr">        - key:</span> <span class="string">node-role.kubernetes.io/master</span></span><br><span class="line"><span class="attr">          effect:</span> <span class="string">NoSchedule</span></span><br><span class="line"></span><br><span class="line"><span class="meta">---</span></span><br><span class="line"></span><br><span class="line"><span class="attr">kind:</span> <span class="string">Service</span></span><br><span class="line"><span class="attr">apiVersion:</span> <span class="string">v1</span></span><br><span class="line"><span class="attr">metadata:</span></span><br><span class="line"><span class="attr">  labels:</span></span><br><span class="line"><span class="attr">    k8s-app:</span> <span class="string">dashboard-metrics-scraper</span></span><br><span class="line"><span class="attr">  name:</span> <span class="string">dashboard-metrics-scraper</span></span><br><span class="line"><span class="attr">  namespace:</span> <span class="string">kubernetes-dashboard</span></span><br><span class="line"><span class="attr">spec:</span></span><br><span class="line"><span class="attr">  ports:</span></span><br><span class="line"><span class="attr">    - port:</span> <span class="number">8000</span></span><br><span class="line"><span class="attr">      targetPort:</span> <span class="number">8000</span></span><br><span class="line"><span class="attr">  selector:</span></span><br><span class="line"><span class="attr">    k8s-app:</span> <span class="string">dashboard-metrics-scraper</span></span><br><span class="line"></span><br><span class="line"><span class="meta">---</span></span><br><span class="line"></span><br><span class="line"><span class="attr">kind:</span> <span class="string">Deployment</span></span><br><span class="line"><span class="attr">apiVersion:</span> <span class="string">apps/v1</span></span><br><span class="line"><span class="attr">metadata:</span></span><br><span class="line"><span class="attr">  labels:</span></span><br><span class="line"><span class="attr">    k8s-app:</span> <span class="string">dashboard-metrics-scraper</span></span><br><span class="line"><span class="attr">  name:</span> <span class="string">dashboard-metrics-scraper</span></span><br><span class="line"><span class="attr">  namespace:</span> <span class="string">kubernetes-dashboard</span></span><br><span class="line"><span class="attr">spec:</span></span><br><span class="line"><span class="attr">  replicas:</span> <span class="number">1</span></span><br><span class="line"><span class="attr">  revisionHistoryLimit:</span> <span class="number">10</span></span><br><span class="line"><span class="attr">  selector:</span></span><br><span class="line"><span class="attr">    matchLabels:</span></span><br><span class="line"><span class="attr">      k8s-app:</span> <span class="string">dashboard-metrics-scraper</span></span><br><span class="line"><span class="attr">  template:</span></span><br><span class="line"><span class="attr">    metadata:</span></span><br><span class="line"><span class="attr">      labels:</span></span><br><span class="line"><span class="attr">        k8s-app:</span> <span class="string">dashboard-metrics-scraper</span></span><br><span class="line"><span class="attr">      annotations:</span></span><br><span class="line">        <span class="string">seccomp.security.alpha.kubernetes.io/pod:</span> <span class="string">'runtime/default'</span></span><br><span class="line"><span class="attr">    spec:</span></span><br><span class="line"><span class="attr">      containers:</span></span><br><span class="line"><span class="attr">        - name:</span> <span class="string">dashboard-metrics-scraper</span></span><br><span class="line"><span class="attr">          image:</span> <span class="string">kubernetesui/metrics-scraper:v1.0.1</span></span><br><span class="line"><span class="attr">          ports:</span></span><br><span class="line"><span class="attr">            - containerPort:</span> <span class="number">8000</span></span><br><span class="line"><span class="attr">              protocol:</span> <span class="string">TCP</span></span><br><span class="line"><span class="attr">          livenessProbe:</span></span><br><span class="line"><span class="attr">            httpGet:</span></span><br><span class="line"><span class="attr">              scheme:</span> <span class="string">HTTP</span></span><br><span class="line"><span class="attr">              path:</span> <span class="string">/</span></span><br><span class="line"><span class="attr">              port:</span> <span class="number">8000</span></span><br><span class="line"><span class="attr">            initialDelaySeconds:</span> <span class="number">30</span></span><br><span class="line"><span class="attr">            timeoutSeconds:</span> <span class="number">30</span></span><br><span class="line"><span class="attr">          volumeMounts:</span></span><br><span class="line"><span class="attr">          - mountPath:</span> <span class="string">/tmp</span></span><br><span class="line"><span class="attr">            name:</span> <span class="string">tmp-volume</span></span><br><span class="line"><span class="attr">          securityContext:</span></span><br><span class="line"><span class="attr">            allowPrivilegeEscalation:</span> <span class="literal">false</span></span><br><span class="line"><span class="attr">            readOnlyRootFilesystem:</span> <span class="literal">true</span></span><br><span class="line"><span class="attr">            runAsUser:</span> <span class="number">1001</span></span><br><span class="line"><span class="attr">            runAsGroup:</span> <span class="number">2001</span></span><br><span class="line"><span class="attr">      serviceAccountName:</span> <span class="string">kubernetes-dashboard</span></span><br><span class="line"><span class="attr">      nodeSelector:</span></span><br><span class="line">        <span class="string">"beta.kubernetes.io/os"</span><span class="string">:</span> <span class="string">linux</span></span><br><span class="line">      <span class="comment"># Comment the following tolerations if Dashboard must not be deployed on master</span></span><br><span class="line"><span class="attr">      tolerations:</span></span><br><span class="line"><span class="attr">        - key:</span> <span class="string">node-role.kubernetes.io/master</span></span><br><span class="line"><span class="attr">          effect:</span> <span class="string">NoSchedule</span></span><br><span class="line"><span class="attr">      volumes:</span></span><br><span class="line"><span class="attr">        - name:</span> <span class="string">tmp-volume</span></span><br><span class="line"><span class="attr">          emptyDir:</span> <span class="string">&#123;&#125;</span></span><br></pre></td></tr></table></figure><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 7.kubernetes-dashboard-ingress.yaml</span></span><br><span class="line"><span class="attr">apiVersion:</span> <span class="string">traefik.containo.us/v1alpha1</span></span><br><span class="line"><span class="attr">kind:</span> <span class="string">IngressRoute</span></span><br><span class="line"><span class="attr">metadata:</span></span><br><span class="line"><span class="attr">  name:</span> <span class="string">kubernetes-dashboard-ingressroute</span></span><br><span class="line"><span class="attr">  namespace:</span> <span class="string">kubernetes-dashboard</span></span><br><span class="line"><span class="attr">spec:</span></span><br><span class="line"><span class="attr">  entryPoints:</span></span><br><span class="line"><span class="bullet">    -</span> <span class="string">websecure</span></span><br><span class="line"><span class="attr">  tls:</span></span><br><span class="line"><span class="attr">    secretName:</span> <span class="string">kubernetes-dashboard-certs</span></span><br><span class="line"><span class="attr">    namespace:</span> <span class="string">kubernetes-dashboard</span></span><br><span class="line"><span class="attr">  routes:</span></span><br><span class="line"><span class="attr">    - kind:</span> <span class="string">Rule</span></span><br><span class="line">      <span class="comment"># match: Host(`k8s.t.io`) &amp;&amp; PathPrefix(`/`)</span></span><br><span class="line"><span class="attr">      match:</span> <span class="string">Host(`k8s.t.io`)</span></span><br><span class="line"><span class="attr">      services:</span></span><br><span class="line"><span class="attr">      - kind:</span> <span class="string">Service</span></span><br><span class="line"><span class="attr">        name:</span> <span class="string">kubernetes-dashboard</span></span><br><span class="line"><span class="attr">        port:</span> <span class="number">443</span></span><br><span class="line"><span class="attr">        namespace:</span> <span class="string">kubernetes-dashboard</span></span><br></pre></td></tr></table></figure><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 8.kubernetes-dashboard-service-account.yaml</span></span><br><span class="line"><span class="attr">apiVersion:</span> <span class="string">v1</span></span><br><span class="line"><span class="attr">kind:</span> <span class="string">ServiceAccount</span></span><br><span class="line"><span class="attr">metadata:</span></span><br><span class="line"><span class="attr">  name:</span> <span class="string">kuberetes-dashboard-admin-user</span></span><br><span class="line"><span class="attr">  namespace:</span> <span class="string">kubernetes-dashboard</span></span><br><span class="line"></span><br><span class="line"><span class="meta">---</span></span><br><span class="line"><span class="attr">kind:</span> <span class="string">ClusterRoleBinding</span></span><br><span class="line"><span class="attr">apiVersion:</span> <span class="string">rbac.authorization.k8s.io/v1</span></span><br><span class="line"><span class="attr">metadata:</span></span><br><span class="line"><span class="attr">  name:</span> <span class="string">kuberetes-dashboard-admin-user</span></span><br><span class="line"><span class="attr">  namespace:</span> <span class="string">kubernetes-dashboard</span></span><br><span class="line"><span class="attr">roleRef:</span></span><br><span class="line"><span class="attr">  apiGroup:</span> <span class="string">rbac.authorization.k8s.io</span></span><br><span class="line"><span class="attr">  kind:</span> <span class="string">ClusterRole</span></span><br><span class="line"><span class="attr">  name:</span> <span class="string">cluster-admin</span></span><br><span class="line"><span class="attr">subjects:</span></span><br><span class="line"><span class="attr">  - kind:</span> <span class="string">ServiceAccount</span></span><br><span class="line"><span class="attr">    name:</span> <span class="string">kuberetes-dashboard-admin-user</span></span><br><span class="line"><span class="attr">    namespace:</span> <span class="string">kubernetes-dashboard</span></span><br></pre></td></tr></table></figure><p>完成后效果</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line">[root@kube-master-1 yaml]# kubectl get ingressroute</span><br><span class="line">NAME                                   AGE</span><br><span class="line">kubernetes-dashboard-ingressroute-ui   68m</span><br><span class="line">traefik-dashboard                      99m</span><br><span class="line">[root@kube-master-1 yaml]# kubectl get svc</span><br><span class="line">NAME         TYPE        CLUSTER-IP     EXTERNAL-IP   PORT(S)        AGE</span><br><span class="line">kubernetes   ClusterIP   10.233.0.1     &lt;none&gt;        443/TCP        79m</span><br><span class="line">traefik      NodePort    10.233.29.85   &lt;none&gt;        80:31216/TCP   59m</span><br><span class="line">[root@kube-master-1 yaml]# kubectl get deployments</span><br><span class="line">NAME      READY   UP-TO-DATE   AVAILABLE   AGE</span><br><span class="line">traefik   1/1     1            1           165m</span><br><span class="line">[root@kube-master-1 yaml]# kubectl get pods</span><br><span class="line">NAME                       READY   STATUS    RESTARTS   AGE</span><br><span class="line">traefik-6485b9b8b4-bczwx   1/1     Running   0          49m</span><br><span class="line">[root@kube-master-1 yaml]# kubectl logs -f traefik-6485b9b8b4-bczwx</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">time=&quot;2020-01-14T08:09:17Z&quot; level=info msg=&quot;Configuration loaded from flags.&quot;</span><br><span class="line">time=&quot;2020-01-14T08:09:17Z&quot; level=info msg=&quot;Traefik version 2.1.2 built on 2020-01-07T18:23:57Z&quot;</span><br><span class="line">time=&quot;2020-01-14T08:09:17Z&quot; level=info msg=&quot;\nStats collection is disabled.\nHelp us improve Traefik by turning this feature on :)\nMore details on: https://docs.traefik.io/v2.0/contributing/data-collection/\n&quot;</span><br><span class="line">time=&quot;2020-01-14T08:09:17Z&quot; level=info msg=&quot;Starting provider aggregator.ProviderAggregator &#123;&#125;&quot;</span><br><span class="line">time=&quot;2020-01-14T08:09:17Z&quot; level=info msg=&quot;Starting provider *traefik.Provider &#123;&#125;&quot;</span><br><span class="line">time=&quot;2020-01-14T08:09:17Z&quot; level=info msg=&quot;Starting provider *ingress.Provider &#123;&#125;&quot;</span><br><span class="line">time=&quot;2020-01-14T08:09:17Z&quot; level=info msg=&quot;ingress label selector is: \&quot;\&quot;&quot; providerName=kubernetes</span><br><span class="line">time=&quot;2020-01-14T08:09:17Z&quot; level=info msg=&quot;Creating in-cluster Provider client&quot; providerName=kubernetes</span><br><span class="line">time=&quot;2020-01-14T08:09:17Z&quot; level=info msg=&quot;Starting provider *crd.Provider &#123;&#125;&quot;</span><br><span class="line">time=&quot;2020-01-14T08:09:17Z&quot; level=info msg=&quot;label selector is: \&quot;\&quot;&quot; providerName=kubernetescrd</span><br><span class="line">time=&quot;2020-01-14T08:09:17Z&quot; level=info msg=&quot;Creating in-cluster Provider client&quot; providerName=kubernetescrd</span><br><span class="line">10.0.2.15 - - [14/Jan/2020:08:09:28 +0000] &quot;GET /ping HTTP/1.1&quot; 200 2 &quot;-&quot; &quot;-&quot; 1 &quot;ping@internal&quot; - 16ms</span><br><span class="line">10.0.2.15 - - [14/Jan/2020:08:09:32 +0000] &quot;GET /ping HTTP/1.1&quot; 200 2 &quot;-&quot; &quot;-&quot; 2 &quot;ping@internal&quot; - 0ms</span><br></pre></td></tr></table></figure><p>我们在外面绑定traefik.t.io与 k8s.t.io hosts</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">[Tue Jan 14 talen@tp ~]$ cat /etc/hosts</span><br><span class="line">192.168.56.102  traefik.t.io</span><br><span class="line">192.168.56.102  k8s.t.io</span><br></pre></td></tr></table></figure><p><img src="../../../../images/image-20200116104116358.png" alt="image-20200116104116358"></p><h1 id="创建dashboard访问service-acount"><a href="#创建dashboard访问service-acount" class="headerlink" title="创建dashboard访问service acount"></a>创建dashboard访问service acount</h1><p>生成证书</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">[root@kube-master-1 yaml]# mkdir certs</span><br><span class="line">[root@kube-master-1 yaml]# openssl req -nodes -newkey rsa:2048 -keyout certs/dashboard.key -out certs/dashboard.csr -subj "/C=/ST=/L=/O=/OU=/CN=kubernetes-dashboard"</span><br><span class="line">Generating a 2048 bit RSA private key</span><br><span class="line">.................................................................................................+++</span><br><span class="line">.........................................................................+++</span><br><span class="line">writing new private key to 'certs/dashboard.key'</span><br><span class="line">-----</span><br><span class="line">No value provided for Subject Attribute C, skipped</span><br><span class="line">No value provided for Subject Attribute ST, skipped</span><br><span class="line">No value provided for Subject Attribute L, skipped</span><br><span class="line">No value provided for Subject Attribute O, skipped</span><br><span class="line">No value provided for Subject Attribute OU, skipped</span><br><span class="line">[root@kube-master-1 yaml]# openssl x509 -req -sha256 -days 10000 -in certs/dashboard.csr -signkey certs/dashboard.key -out certs/dashboard.crt</span><br><span class="line">Signature ok</span><br><span class="line">subject=/CN=kubernetes-dashboard</span><br><span class="line">Getting Private key</span><br><span class="line">[root@kube-master-1 yaml]# kubectl create secret generic kubernetes-dashboard-certs --from-file=certs -n kubernetes-dashboard</span><br><span class="line">Error from server (AlreadyExists): secrets "kubernetes-dashboard-certs" already exists</span><br><span class="line">[root@kube-master-1 yaml]# kubectl delete secret kubernetes-dashboard-certs -n kubernetes-dashboard</span><br><span class="line">secret "kubernetes-dashboard-certs" deleted</span><br><span class="line">[root@kube-master-1 yaml]# kubectl create secret generic kubernetes-dashboard-certs --from-file=certs -n kubernetes-dashboard</span><br><span class="line">secret/kubernetes-dashboard-certs created</span><br></pre></td></tr></table></figure><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">[root@kube-master-1 yaml]# kubectl -n kubernetes-dashboard describe secret $(kubectl -n kubernetes-dashboard get secret | grep kuberetes-dashboard-admin-user | awk &apos;&#123;print $1&#125;&apos;)</span><br><span class="line">Name:         kuberetes-dashboard-admin-user-token-vrkvz</span><br><span class="line">Namespace:    kubernetes-dashboard</span><br><span class="line">Labels:       &lt;none&gt;</span><br><span class="line">Annotations:  kubernetes.io/service-account.name: kuberetes-dashboard-admin-user</span><br><span class="line">kubernetes.io/service-account.uid: b7ed67a3-08b3-456e-b543-75802dc247d6</span><br><span class="line"></span><br><span class="line">Type:  kubernetes.io/service-account-token</span><br><span class="line"></span><br><span class="line">Data</span><br><span class="line">====</span><br><span class="line">ca.crt:     1025 bytes</span><br><span class="line">namespace:  20 bytes</span><br><span class="line">token:      eyJhbGciOiJSUzI1NiIsImtpZCI6InhROXFDVHVTbXpNaTJ4a09DSG5PS0x2T05WS2pnLV8tQ2pYOEtvNGU5Qk0ifQ.eyJpc3MiOiJrdWJlcm5ldGVzL3NlcnZpY2VhY2NvdW50Iiwia3ViZXJuZXRlcy5pby9zZXJ2aWNlYWNjb3VudC9uYW1lc3BhY2UiOiJrdWJlcm5ldGVzLWRhc2hib2FyZCIsImt1YmVybmV0ZXMuaW8vc2VydmljZWFjY291bnQvc2VjcmV0Lm5hbWUiOiJrdWJlcmV0ZXMtZGFzaGJvYXJkLWFkbWluLXVzZXItdG9rZW4tdnJrdnoiLCJrdWJlcm5ldGVzLmlvL3NlcnZpY2VhY2NvdW50L3NlcnZpY2UtYWNjb3VudC5uYW1lIjoia3ViZXJldGVzLWRhc2hib2FyZC1hZG1pbi11c2VyIiwia3ViZXJuZXRlcy5pby9zZXJ2aWNlYWNjb3VudC9zZXJ2aWNlLWFjY291bnQudWlkIjoiYjdlZDY3YTMtMDhiMy00NTZlLWI1NDMtNzU4MDJkYzI0N2Q2Iiwic3ViIjoic3lzdGVtOnNlcnZpY2VhY2NvdW50Omt1YmVybmV0ZXMtZGFzaGJvYXJkOmt1YmVyZXRlcy1kYXNoYm9hcmQtYWRtaW4tdXNlciJ9.Dx8gB-7-srSAE7d7rgwyx5YyJLIkOGOc3LSVqzsrdadIm0zaeaSvqylFEsXaXuxW3APpruv1lIDCF8QpM9xFadCo2XQ1FEHnDaj1eCSZjpEqSkQI9zha43fGXjMNkuTEytp-QmSunILCKzTX6p516OB_vC2JQjx2nXsC_hAWJEld5aas1gDET90E-VwTwBIcsW98ovK88TJ-vwg9pB4Ng081kl_EHligEvN52eBdqB6grlSCjSG9vhA9mzykNNwB7KAQ-hrzWKP_yvmtHTlHvUibXY9nGjlL9nFQVbdQQrgPWT0jux93dzFGMFMvjkk5GZuFxRellj55G_ZDpmvszQ</span><br></pre></td></tr></table></figure><p>使用token访问kuberetes-dashboard</p><p><img src="../../../../images/image-20200116104148178.png" alt="image-20200116104148178"></p><p><img src="../../../../images/image-20200116104214415.png" alt="image-20200116104214415"></p>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;Traefik是一个开源的kubernetes ingress controller,用于实现边缘路由，反向代理，自动发现服务。&lt;/p&gt;
&lt;p&gt;Traefik支持多种集群技术做为它的Providers,主流使用的如Kubernetes，Docker，Docker Swarm，AWS，Mesos等等&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;../../../../images/traefik-architecture.png&quot; alt=&quot;img&quot;&gt;&lt;/p&gt;
&lt;p&gt;Traefik是一个边缘路由器，可以作为Kuberetes服务对外暴露的入口。&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;../../../../images/traefik-architecture-overview.png&quot; alt=&quot;traefik architecture overview&quot;&gt;&lt;/p&gt;
&lt;p&gt;更的详细介绍参考官方网站：&lt;a href=&quot;https://docs.traefik.io/&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;https://docs.traefik.io/&lt;/a&gt;&lt;/p&gt;
&lt;h1 id=&quot;安装&quot;&gt;&lt;a href=&quot;#安装&quot; class=&quot;headerlink&quot; title=&quot;安装&quot;&gt;&lt;/a&gt;安装&lt;/h1&gt;
    
    </summary>
    
      <category term="kubernetes" scheme="https://talenhao.github.io/categories/kubernetes/"/>
    
    
      <category term="traefik" scheme="https://talenhao.github.io/tags/traefik/"/>
    
  </entry>
  
  <entry>
    <title>dns 压测</title>
    <link href="https://talenhao.github.io/2020/01/06/dns-%E5%8E%8B%E6%B5%8B/"/>
    <id>https://talenhao.github.io/2020/01/06/dns-压测/</id>
    <published>2020-01-06T07:38:50.000Z</published>
    <updated>2020-01-06T07:38:50.000Z</updated>
    
    <content type="html"><![CDATA[<h1 id="DNS压测工具querypref"><a href="#DNS压测工具querypref" class="headerlink" title="DNS压测工具querypref"></a>DNS压测工具querypref</h1><h2 id="安装"><a href="#安装" class="headerlink" title="安装"></a>安装</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># wget https://downloads.isc.org/isc/bind9/9.11.14/bind-9.11.14.tar.gz</span></span><br><span class="line"><span class="comment"># tar zxvf bind-9.11.14.tar.gz</span></span><br><span class="line"><span class="comment"># cd bind-9.11.14/contrib/queryperf/</span></span><br><span class="line"><span class="comment"># sh configure</span></span><br><span class="line"><span class="comment"># make</span></span><br></pre></td></tr></table></figure><h2 id="准备压测文件"><a href="#准备压测文件" class="headerlink" title="准备压测文件"></a>准备压测文件</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># vim queryfile.txt</span></span><br><span class="line">dnspref.example.com.cn A</span><br><span class="line">...</span><br><span class="line"><span class="comment"># wc -l queryfile.txt </span></span><br><span class="line">1899450 queryfile.txt</span><br></pre></td></tr></table></figure><h2 id="开始压测"><a href="#开始压测" class="headerlink" title="开始压测"></a>开始压测</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">./queryperf -d queryfile.txt -s  10.10.10.1</span><br></pre></td></tr></table></figure><h2 id="压测结果"><a href="#压测结果" class="headerlink" title="压测结果"></a>压测结果</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line">[Status] Testing complete</span><br><span class="line"></span><br><span class="line">Statistics:</span><br><span class="line"></span><br><span class="line">  Parse input file:     once</span><br><span class="line">  Ended due to:         reaching end of file</span><br><span class="line"></span><br><span class="line">  Queries sent:         1899450 queries</span><br><span class="line">  Queries completed:    1899450 queries</span><br><span class="line">  Queries lost:         0 queries</span><br><span class="line">  Queries delayed(?):   0 queries</span><br><span class="line"></span><br><span class="line">  RTT max:              7.449286 sec</span><br><span class="line">  RTT min:              0.000050 sec</span><br><span class="line">  RTT average:          0.000756 sec</span><br><span class="line">  RTT std deviation:    0.016854 sec</span><br><span class="line">  RTT out of range:     92 queries</span><br><span class="line"></span><br><span class="line">  Percentage completed: 100.00%</span><br><span class="line">  Percentage lost:        0.00%</span><br><span class="line"></span><br><span class="line">  Started at:           Mon Jan  6 15:34:17 2020</span><br><span class="line">  Finished at:          Mon Jan  6 15:35:33 2020</span><br><span class="line">  Ran for:              76.191855 seconds</span><br><span class="line"></span><br><span class="line">  Queries per second:   24929.830098 qps</span><br></pre></td></tr></table></figure>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h1 id=&quot;DNS压测工具querypref&quot;&gt;&lt;a href=&quot;#DNS压测工具querypref&quot; class=&quot;headerlink&quot; title=&quot;DNS压测工具querypref&quot;&gt;&lt;/a&gt;DNS压测工具querypref&lt;/h1&gt;&lt;h2 id=&quot;安装&quot;&gt;&lt;a hr
      
    
    </summary>
    
      <category term="linux" scheme="https://talenhao.github.io/categories/linux/"/>
    
    
      <category term="dns" scheme="https://talenhao.github.io/tags/dns/"/>
    
  </entry>
  
  <entry>
    <title>Iptables笔记</title>
    <link href="https://talenhao.github.io/2020/01/01/iptables/"/>
    <id>https://talenhao.github.io/2020/01/01/iptables/</id>
    <published>2020-01-01T02:58:33.000Z</published>
    <updated>2020-01-01T02:58:33.000Z</updated>
    
    <content type="html"><![CDATA[<h1 id="Iptables"><a href="#Iptables" class="headerlink" title="Iptables"></a>Iptables</h1><p>iptables执行链路</p><p><img src="../../../../images/iptables.png" alt="iptables"></p><h2 id="iptables-规则"><a href="#iptables-规则" class="headerlink" title="iptables 规则"></a>iptables 规则</h2><p><img src="../../../../images/iptables2.png" alt="iptables2"></p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h1 id=&quot;Iptables&quot;&gt;&lt;a href=&quot;#Iptables&quot; class=&quot;headerlink&quot; title=&quot;Iptables&quot;&gt;&lt;/a&gt;Iptables&lt;/h1&gt;&lt;p&gt;iptables执行链路&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;../../../../imag
      
    
    </summary>
    
      <category term="linux" scheme="https://talenhao.github.io/categories/linux/"/>
    
    
      <category term="iptables" scheme="https://talenhao.github.io/tags/iptables/"/>
    
  </entry>
  
  <entry>
    <title>三平面分离</title>
    <link href="https://talenhao.github.io/2019/12/27/%E4%B8%89%E5%B9%B3%E9%9D%A2%E5%88%86%E7%A6%BB/"/>
    <id>https://talenhao.github.io/2019/12/27/三平面分离/</id>
    <published>2019-12-27T06:37:33.000Z</published>
    <updated>2019-12-27T06:37:33.000Z</updated>
    
    <content type="html"><![CDATA[<h2 id="数据平面，控制平面，管理平面"><a href="#数据平面，控制平面，管理平面" class="headerlink" title="数据平面，控制平面，管理平面"></a><a href="https://tjlxy.lofter.com/post/335f69_99bc622" target="_blank" rel="noopener">数据平面，控制平面，管理平面</a></h2><p>转自：<a href="http://tjlxy.lofter.com/post/335f69_99bc622" target="_blank" rel="noopener">http://tjlxy.lofter.com/post/335f69_99bc622</a></p><p>管理平面/控制平面（统称控制平面）<br><strong>管理平面</strong>是提供给网络管理人员使用TELNET、WEB、SSH、SNMP、RMON 等方式来管理设备，并支持、理解和执行管理人员对于网络设备各种网络协议的设置命令。管理平面提供了控制平面正常运行的前提，管理平面必须预先设置好控制平面中各种协议的相关参数，并支持在必要时刻对控制平面的运行进行干预。</p><p><strong>控制平面</strong>用于控制和管理所有网络协议的运行，例如生成树协议、VLAN 协议、ARP协议、各种路由协议和组播协议等等的管理和控制。控制平面通过网络协议提供给路由器/交换机对整个网络环境中网络设备、连接链路和交互协议的准确了解，并在网络状况发生改变时做出及时的调整以维护网络的正常运行。控制平面提供了数据平面数据处理转发前所必须的各种网络信息和转发查询表项。控制平面并不占用过多的硬件资源，但在正常状况下依然是网络设备CPU资源的主要占用平面，因此除了优化网络设备对于控制平面的调度流程和效率，一般还可以通过提供多CPU或提高CPU的处理性能来提高网络设备的控制平面性能。<br>控制平面主要靠CPU资源来处理信息。<br>show ip route 查看IP路由表，属控制平面范畴（路由信息数据库，RIB）</p><p><strong>数据平面</strong><br>网络设备的基本任务是处理和转发不同端口上各种类型的数据，对于数据处理过程中各种具体的处理转发过程，例如L2/L3/ACL/QOS/组播/安全防护等各功能的具体执行过程，都属于数据转发平面的任务范畴。数据转发平面在网络设备的各种平面任务当中需要占用决大部分的硬件资源，也直接地对其性能表现起决定作用，各个厂家都通过各种技术手段和芯片技术努力地提高网络设备数据平面的处理性能。<br>数据转发平面主要靠硬件资源来处理信息。<br>show ip cef 查看最终迭代的出接口，属数据平面范畴（转发信息数据库，FIB）</p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h2 id=&quot;数据平面，控制平面，管理平面&quot;&gt;&lt;a href=&quot;#数据平面，控制平面，管理平面&quot; class=&quot;headerlink&quot; title=&quot;数据平面，控制平面，管理平面&quot;&gt;&lt;/a&gt;&lt;a href=&quot;https://tjlxy.lofter.com/post/335f6
      
    
    </summary>
    
      <category term="microservice" scheme="https://talenhao.github.io/categories/microservice/"/>
    
    
      <category term="servicemesh" scheme="https://talenhao.github.io/tags/servicemesh/"/>
    
  </entry>
  
  <entry>
    <title>ibus rime特殊符号</title>
    <link href="https://talenhao.github.io/2019/12/24/ibus-rime%E7%89%B9%E6%AE%8A%E7%AC%A6%E5%8F%B7/"/>
    <id>https://talenhao.github.io/2019/12/24/ibus-rime特殊符号/</id>
    <published>2019-12-24T09:31:54.000Z</published>
    <updated>2019-12-24T09:31:54.000Z</updated>
    
    <content type="html"><![CDATA[<h2 id="ibus-rime-五笔输入法输入特殊符号编码表"><a href="#ibus-rime-五笔输入法输入特殊符号编码表" class="headerlink" title="ibus rime 五笔输入法输入特殊符号编码表"></a>ibus rime 五笔输入法输入特殊符号编码表</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">码表：</span><br><span class="line">zzbd 标点符号     zzpy 拼音符号    zzts 特殊符号</span><br><span class="line">zzsx 数学符号     zzdx 单位符号    zzjt 箭头符号</span><br><span class="line">zzys 圆圈数字     zzpp 偏旁        zzds 带点数字</span><br></pre></td></tr></table></figure>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h2 id=&quot;ibus-rime-五笔输入法输入特殊符号编码表&quot;&gt;&lt;a href=&quot;#ibus-rime-五笔输入法输入特殊符号编码表&quot; class=&quot;headerlink&quot; title=&quot;ibus rime 五笔输入法输入特殊符号编码表&quot;&gt;&lt;/a&gt;ibus rime 五笔输入
      
    
    </summary>
    
      <category term="archlinux" scheme="https://talenhao.github.io/categories/archlinux/"/>
    
    
      <category term="ibus" scheme="https://talenhao.github.io/tags/ibus/"/>
    
  </entry>
  
  <entry>
    <title>microservice</title>
    <link href="https://talenhao.github.io/2019/12/23/microservice/"/>
    <id>https://talenhao.github.io/2019/12/23/microservice/</id>
    <published>2019-12-23T05:36:22.000Z</published>
    <updated>2019-12-23T05:36:22.000Z</updated>
    
    <content type="html"><![CDATA[<h1 id="MicroService微服务"><a href="#MicroService微服务" class="headerlink" title="MicroService微服务"></a>MicroService微服务</h1><p><img src="../../../../images/%E5%BE%AE%E6%9C%8D%E5%8A%A1.svg" alt="微服务"></p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h1 id=&quot;MicroService微服务&quot;&gt;&lt;a href=&quot;#MicroService微服务&quot; class=&quot;headerlink&quot; title=&quot;MicroService微服务&quot;&gt;&lt;/a&gt;MicroService微服务&lt;/h1&gt;&lt;p&gt;&lt;img src=&quot;../../..
      
    
    </summary>
    
      <category term="service mesh" scheme="https://talenhao.github.io/categories/service-mesh/"/>
    
    
      <category term="service mesh" scheme="https://talenhao.github.io/tags/service-mesh/"/>
    
  </entry>
  
  <entry>
    <title>Mysql DAL</title>
    <link href="https://talenhao.github.io/2019/12/23/Mysql-DAL/"/>
    <id>https://talenhao.github.io/2019/12/23/Mysql-DAL/</id>
    <published>2019-12-23T02:18:48.000Z</published>
    <updated>2019-12-23T02:18:48.000Z</updated>
    
    <content type="html"><![CDATA[<h1 id="MySQL-数据访问层中间件（DAL）"><a href="#MySQL-数据访问层中间件（DAL）" class="headerlink" title="MySQL 数据访问层中间件（DAL）"></a>MySQL 数据访问层中间件（DAL）</h1><pre class="mermaid">graph TBclient-->altasclient-->mysql_routerclient-->mycataltas-->mastermysql_router-->mastermycat-->masteraltas-->slavemysql_router-->slavemycat-->slave</pre><pre class="mermaid">graph TBcobar-->mycat</pre><p>使用横向扩展，读写分离提升读性能</p><p>使用分库分表提升写性能</p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h1 id=&quot;MySQL-数据访问层中间件（DAL）&quot;&gt;&lt;a href=&quot;#MySQL-数据访问层中间件（DAL）&quot; class=&quot;headerlink&quot; title=&quot;MySQL 数据访问层中间件（DAL）&quot;&gt;&lt;/a&gt;MySQL 数据访问层中间件（DAL）&lt;/h1&gt;&lt;pre 
      
    
    </summary>
    
      <category term="uncategorized" scheme="https://talenhao.github.io/categories/uncategorized/"/>
    
    
      <category term="untags" scheme="https://talenhao.github.io/tags/untags/"/>
    
  </entry>
  
  <entry>
    <title>历年关键字</title>
    <link href="https://talenhao.github.io/2019/12/19/%E5%8E%86%E5%B9%B4%E5%85%B3%E9%94%AE%E5%AD%97/"/>
    <id>https://talenhao.github.io/2019/12/19/历年关键字/</id>
    <published>2019-12-19T07:31:52.000Z</published>
    <updated>2019-12-19T07:31:52.000Z</updated>
    
    <content type="html"><![CDATA[<h1 id="2019"><a href="#2019" class="headerlink" title="2019"></a>2019</h1><p><code>微服务</code></p><p><code>service mesh</code> <code>服务网格</code></p><p><code>serviceless</code></p><p><code>chaos enginering</code> <code>混沌工程</code></p><p><code>ant</code></p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h1 id=&quot;2019&quot;&gt;&lt;a href=&quot;#2019&quot; class=&quot;headerlink&quot; title=&quot;2019&quot;&gt;&lt;/a&gt;2019&lt;/h1&gt;&lt;p&gt;&lt;code&gt;微服务&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;&lt;code&gt;service mesh&lt;/code&gt; &lt;code&gt;服务网格&lt;/
      
    
    </summary>
    
      <category term="uncategorized" scheme="https://talenhao.github.io/categories/uncategorized/"/>
    
    
      <category term="untags" scheme="https://talenhao.github.io/tags/untags/"/>
    
  </entry>
  
  <entry>
    <title>kubernetes学习笔记</title>
    <link href="https://talenhao.github.io/2019/11/27/kubernetes%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/"/>
    <id>https://talenhao.github.io/2019/11/27/kubernetes学习笔记/</id>
    <published>2019-11-27T11:26:34.000Z</published>
    <updated>2019-11-27T11:26:34.000Z</updated>
    
    <content type="html"><![CDATA[<h2 id="docker"><a href="#docker" class="headerlink" title="docker"></a>docker</h2><p><img src="../../../../images/docker-engine.png" alt="docker engine"></p><p>图片来自[<a href="https://www.qikqiak.com/k8s-book/docs/2.Docker%20%E7%AE%80%E4%BB%8B.html]" target="_blank" rel="noopener">https://www.qikqiak.com/k8s-book/docs/2.Docker%20%E7%AE%80%E4%BB%8B.html]</a>(<a href="https://www.qikqiak.com/k8s-book/docs/2.Docker" target="_blank" rel="noopener">https://www.qikqiak.com/k8s-book/docs/2.Docker</a> 简介.html)</p><h3 id="命令"><a href="#命令" class="headerlink" title="命令"></a>命令</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash"> docker pull [选项] [Docker Registry 地址[:端口]/]仓库名[:标签]</span></span><br></pre></td></tr></table></figure><h2 id="运行"><a href="#运行" class="headerlink" title="运行"></a>运行</h2><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">docker run -i -t --rm 镜像:标签 /bin/bash</span><br><span class="line"><span class="meta">$</span><span class="bash"> docker run ubuntu:16.04 /bin/<span class="built_in">echo</span> <span class="string">'Hello world'</span></span></span><br><span class="line">-d 后台运行</span><br><span class="line">docker commit修复运行的镜像读写层后提交</span><br></pre></td></tr></table></figure><p>列出镜像</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"> docker image ls</span><br><span class="line">REPOSITORY          TAG                 IMAGE ID            CREATED             SIZE</span><br><span class="line">docker.io/redis     latest              3c41ce05add9        5 months ago        95 MB</span><br></pre></td></tr></table></figure><p>当利用<code>docker run</code>来创建容器时，Docker 在后台运行的标准操作包括：</p><ul><li>检查本地是否存在指定的镜像，不存在就从公有仓库下载</li><li>利用镜像创建并启动一个容器</li><li>分配一个文件系统，并在只读的镜像层外面挂载一层可读写层</li><li>从宿主主机配置的网桥接口中桥接一个虚拟接口到容器中去</li><li>从地址池配置一个 ip 地址给容器</li><li>执行用户指定的应用程序</li><li>执行完毕后容器被终止</li></ul><h3 id="dockerfile"><a href="#dockerfile" class="headerlink" title="dockerfile"></a>dockerfile</h3><p>Union FS 是有最大层数限制的，比如 AUFS，曾经是最大不得超过 42 层，现在是不得超过 127 层</p><ol><li>FROM 指定基础镜像<ol><li>官方高质量镜像</li><li>scratch 一个虚拟的镜像,表示空白</li></ol></li><li>RUN 运行命令(使用&amp;&amp;连接生成一层FS, 支持\ 换行 ,# 注释)<ol><li>shell:RUN &lt;命令&gt;</li><li>exec:RUN [“可执行文件”, “参数1”, “参数2”]</li></ol></li></ol><h3 id="构建镜像"><a href="#构建镜像" class="headerlink" title="构建镜像"></a>构建镜像</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker build [选项] &lt;上下文路径/URL/-&gt;</span><br></pre></td></tr></table></figure><p>镜像构建上下文目录是相对engine来说的,不是本地的路径,必须改./开头.</p><p>使用-f可以指定任意名称的文件为dockerfile文件.</p><table><thead><tr><th>资源类型</th><th></th><th></th></tr></thead><tbody><tr><td>secrets</td><td></td><td></td></tr><tr><td>clusterrolebinding</td><td></td><td></td></tr><tr><td>serviceaccount</td><td></td><td></td></tr></tbody></table><p># </p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">kubectl delete namespaces &lt;insert-some-namespace-name&gt;</span><br><span class="line">删除namespace将删除其下的所有资源</span><br></pre></td></tr></table></figure><h2 id="kubernetes-dashboard-v1-10在k8s-1-16中无法登陆"><a href="#kubernetes-dashboard-v1-10在k8s-1-16中无法登陆" class="headerlink" title="kubernetes-dashboard v1.10在k8s 1.16中无法登陆"></a>kubernetes-dashboard v1.10在k8s 1.16中无法登陆</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">https://github.com/kubernetes/dashboard/issues/4406</span><br><span class="line">floreks commented on Oct 10, 2019</span><br><span class="line">Dashboard v1 is not being maintained and will not work with newer versions of K8S. v2 will be updated and new beta will be released once #4377 is merged.</span><br></pre></td></tr></table></figure>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h2 id=&quot;docker&quot;&gt;&lt;a href=&quot;#docker&quot; class=&quot;headerlink&quot; title=&quot;docker&quot;&gt;&lt;/a&gt;docker&lt;/h2&gt;&lt;p&gt;&lt;img src=&quot;../../../../images/docker-engine.png&quot; alt=&quot;d
      
    
    </summary>
    
      <category term="kubernetes" scheme="https://talenhao.github.io/categories/kubernetes/"/>
    
    
      <category term="kubernetes" scheme="https://talenhao.github.io/tags/kubernetes/"/>
    
  </entry>
  
  <entry>
    <title>负载均衡后端检测</title>
    <link href="https://talenhao.github.io/2019/11/13/%E8%B4%9F%E8%BD%BD%E5%9D%87%E8%A1%A1%E5%90%8E%E7%AB%AF%E6%A3%80%E6%B5%8B/"/>
    <id>https://talenhao.github.io/2019/11/13/负载均衡后端检测/</id>
    <published>2019-11-13T06:32:09.000Z</published>
    <updated>2019-11-13T06:32:09.000Z</updated>
    
    <content type="html"><![CDATA[<h2 id="nginx后端检测"><a href="#nginx后端检测" class="headerlink" title="nginx后端检测"></a>nginx后端检测</h2><p>默认没有踢除功能</p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h2 id=&quot;nginx后端检测&quot;&gt;&lt;a href=&quot;#nginx后端检测&quot; class=&quot;headerlink&quot; title=&quot;nginx后端检测&quot;&gt;&lt;/a&gt;nginx后端检测&lt;/h2&gt;&lt;p&gt;默认没有踢除功能&lt;/p&gt;

      
    
    </summary>
    
      <category term="负载均衡" scheme="https://talenhao.github.io/categories/%E8%B4%9F%E8%BD%BD%E5%9D%87%E8%A1%A1/"/>
    
    
      <category term="lvs,nginx,haproxy" scheme="https://talenhao.github.io/tags/lvs-nginx-haproxy/"/>
    
  </entry>
  
  <entry>
    <title>linux资源管理</title>
    <link href="https://talenhao.github.io/2019/11/13/linux%E8%B5%84%E6%BA%90%E7%AE%A1%E7%90%86/"/>
    <id>https://talenhao.github.io/2019/11/13/linux资源管理/</id>
    <published>2019-11-13T04:04:10.000Z</published>
    <updated>2019-11-13T04:04:10.000Z</updated>
    
    <content type="html"><![CDATA[<h2 id="进程"><a href="#进程" class="headerlink" title="进程"></a>进程</h2><p>单进程-&gt;FD</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">#用户单进程的最大文件数，用户登录时生效</span><br><span class="line">echo &apos;* soft nofile 1048576&apos; &gt;&gt; /etc/security/limits.conf</span><br><span class="line">echo &apos;* hard nofile 1048576&apos; &gt;&gt; /etc/security/limits.conf</span><br><span class="line">ulimit -n 1048576 #用户单进程的最大文件描述符数 当前会话生效</span><br></pre></td></tr></table></figure>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h2 id=&quot;进程&quot;&gt;&lt;a href=&quot;#进程&quot; class=&quot;headerlink&quot; title=&quot;进程&quot;&gt;&lt;/a&gt;进程&lt;/h2&gt;&lt;p&gt;单进程-&amp;gt;FD&lt;/p&gt;
&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;g
      
    
    </summary>
    
      <category term="linux" scheme="https://talenhao.github.io/categories/linux/"/>
    
    
      <category term="linux" scheme="https://talenhao.github.io/tags/linux/"/>
    
  </entry>
  
  <entry>
    <title>tcp/ip</title>
    <link href="https://talenhao.github.io/2019/11/13/tcp-ip/"/>
    <id>https://talenhao.github.io/2019/11/13/tcp-ip/</id>
    <published>2019-11-13T03:01:53.000Z</published>
    <updated>2019-11-13T03:01:53.000Z</updated>
    
    <content type="html"><![CDATA[<h2 id="端口号"><a href="#端口号" class="headerlink" title="端口号"></a>端口号</h2><p>TCP协议源端口与目标端口分别占用2个字节(16个bit),共可存储2^16=65536个端口.去掉1024个系统保留端口,可用64512个端口.</p><p>一个客户端共可发起64512个TCP连接</p><p>服务端没有数量限制,取决于内存,CPU资源限制.服务端的TCP连接数为: socket fd(clientip:65412)*N.</p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h2 id=&quot;端口号&quot;&gt;&lt;a href=&quot;#端口号&quot; class=&quot;headerlink&quot; title=&quot;端口号&quot;&gt;&lt;/a&gt;端口号&lt;/h2&gt;&lt;p&gt;TCP协议源端口与目标端口分别占用2个字节(16个bit),共可存储2^16=65536个端口.去掉1024个系统保留端口,可用64
      
    
    </summary>
    
      <category term="tcpip" scheme="https://talenhao.github.io/categories/tcpip/"/>
    
    
      <category term="tcpip" scheme="https://talenhao.github.io/tags/tcpip/"/>
    
  </entry>
  
  <entry>
    <title>数据结构</title>
    <link href="https://talenhao.github.io/2019/11/10/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84/"/>
    <id>https://talenhao.github.io/2019/11/10/数据结构/</id>
    <published>2019-11-10T02:06:56.000Z</published>
    <updated>2019-11-10T02:06:56.000Z</updated>
    
    <content type="html"><![CDATA[<h1 id="Data-Structures-数据结构"><a href="#Data-Structures-数据结构" class="headerlink" title="Data Structures 数据结构"></a>Data Structures 数据结构</h1><h2 id="heep-堆"><a href="#heep-堆" class="headerlink" title="heep(堆)"></a>heep(堆)</h2><p>堆(heap)又被为优先队列(priority queue),但并不是队列(按先后顺序).堆是按优先级dequeue(出队),enqueue(入队).</p><p>“堆”是实现调度器的理想数据结构。(Linux中可以使用nice命令来影响进程的优先级)</p><p>堆通常是一个可以被看做一棵完全二叉树(complete binary tree)的数组对象(二叉堆(binary heap)</p><p>堆顶的优先级高,堆的主要操作是插入和删除最小元素(元素值本身为优先级键值，小元素享有高优先级)。</p><ol><li><p>新加入的节点加入底部,与父节点比较优先级大小,比父节点小就交换.(percolate_up)</p></li><li><p>删除根节点后生成两个子树,重构堆(percolate_down).将lasted做为根连接子树</p></li></ol><p>堆是非线性数据结构，相当于一维数组，有两个直接后继。</p><p>堆的定义如下：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">n个元素的序列&#123;k1,k2,ki,…,kn&#125;当且仅当满足下关系时，称之为堆。</span><br><span class="line">(ki &lt;= k2i,ki &lt;= k2i+1)或者(ki &gt;= k2i,ki &gt;= k2i+1), (i = 1,2,3,4...n/2)</span><br></pre></td></tr></table></figure><p>在程序中，堆用于动态分配和释放程序所使用的对象。在以下情况中调用堆操作：</p><ol><li><p>事先不知道程序所需对象的数量和大小。</p></li><li><p>对象太大，不适合使用堆栈分配器。</p></li></ol><p>堆使用运行期间分配给代码和堆栈以外的部分内存。</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">计算公式</span><br><span class="line">parent(i) = floor((i - 1)/2)</span><br><span class="line">left(i)   = 2i + 1</span><br><span class="line">right(i)  = 2i + 2</span><br></pre></td></tr></table></figure><p>这些公式允许我们不使用指针就可以找到任何一个节点的父节点或者子节点。事情比简单的去掉指针要复杂，但这就是交易：我们节约了空间，但是要进行更多计算。幸好这些计算很快并且只需要<strong>O(1)</strong>的时间。</p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h1 id=&quot;Data-Structures-数据结构&quot;&gt;&lt;a href=&quot;#Data-Structures-数据结构&quot; class=&quot;headerlink&quot; title=&quot;Data Structures 数据结构&quot;&gt;&lt;/a&gt;Data Structures 数据结构&lt;/h1&gt;&lt;
      
    
    </summary>
    
      <category term="dataStructures" scheme="https://talenhao.github.io/categories/dataStructures/"/>
    
    
      <category term="dataStructures" scheme="https://talenhao.github.io/tags/dataStructures/"/>
    
  </entry>
  
  <entry>
    <title>react</title>
    <link href="https://talenhao.github.io/2019/11/05/react/"/>
    <id>https://talenhao.github.io/2019/11/05/react/</id>
    <published>2019-11-05T02:51:13.000Z</published>
    <updated>2019-11-05T02:51:13.000Z</updated>
    
    <content type="html"><![CDATA[<h2 id="react-遍历"><a href="#react-遍历" class="headerlink" title="react 遍历"></a>react 遍历</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">res.data.map(</span><br><span class="line">  (item, index)=&gt;&#123;</span><br><span class="line">    item.key = index;</span><br><span class="line">    return item;</span><br><span class="line">  &#125;</span><br><span class="line">);</span><br></pre></td></tr></table></figure><h3 id="antd-table"><a href="#antd-table" class="headerlink" title="antd table"></a>antd table</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">const columns</span><br><span class="line">const dataSource</span><br><span class="line">const rowSelection</span><br></pre></td></tr></table></figure><h2 id="CROS"><a href="#CROS" class="headerlink" title="CROS"></a>CROS</h2><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Access to XMLHttpRequest at 'http://127.0.0.1:8000/api/imooc/order/' from origin 'http://127.0.0.1:3000' has been blocked by CORS policy: No 'Access-Control-Allow-Origin' header is present on the requested resource.</span><br></pre></td></tr></table></figure><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Origin: http://127.0.0.1:3000</span><br></pre></td></tr></table></figure><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">pip install django djangorestframework django-cors-headers</span><br><span class="line"></span><br><span class="line">INSTALLED_APPS = [</span><br><span class="line">    ...</span><br><span class="line">    'corsheaders',</span><br><span class="line">    ...</span><br><span class="line">]</span><br><span class="line"></span><br><span class="line">MIDDLEWARE = [</span><br><span class="line">...</span><br><span class="line">    'corsheaders.middleware.CorsMiddleware'</span><br><span class="line">]</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">CORS_ORIGIN_ALLOW_ALL=True</span><br><span class="line">或</span><br><span class="line">CORS_ORIGIN_WHITELIST = [</span><br><span class="line">    'google.com',</span><br><span class="line">    'hostname.example.com',</span><br><span class="line">    'localhost:8000',</span><br><span class="line">    '127.0.0.1:9000'</span><br><span class="line">]</span><br></pre></td></tr></table></figure><h2 id="index-js-1375-Warning-Failed-prop-type-Invalid-prop-id-of-type-array-supplied-to-Select-expected-string"><a href="#index-js-1375-Warning-Failed-prop-type-Invalid-prop-id-of-type-array-supplied-to-Select-expected-string" class="headerlink" title="index.js:1375 Warning: Failed prop type: Invalid prop id of type array supplied to Select, expected string."></a>index.js:1375 Warning: Failed prop type: Invalid prop <code>id</code> of type <code>array</code> supplied to <code>Select</code>, expected <code>string</code>.</h2><h3 id="expected-to-return-a-value-in-arrow-function-array-callback-return"><a href="#expected-to-return-a-value-in-arrow-function-array-callback-return" class="headerlink" title="expected to return a value in arrow function array-callback-return"></a>expected to return a value in arrow function array-callback-return</h3><p>A <code>map()</code> creates an array, so a <code>return</code> is expected for all code paths (if/elses).</p><p>If you don’t want an array or to return data, use <code>forEach</code> instead.</p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h2 id=&quot;react-遍历&quot;&gt;&lt;a href=&quot;#react-遍历&quot; class=&quot;headerlink&quot; title=&quot;react 遍历&quot;&gt;&lt;/a&gt;react 遍历&lt;/h2&gt;&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td cl
      
    
    </summary>
    
      <category term="front-end" scheme="https://talenhao.github.io/categories/front-end/"/>
    
    
      <category term="react" scheme="https://talenhao.github.io/tags/react/"/>
    
  </entry>
  
  <entry>
    <title>Linux kernel</title>
    <link href="https://talenhao.github.io/2019/11/01/Linux-kernel/"/>
    <id>https://talenhao.github.io/2019/11/01/Linux-kernel/</id>
    <published>2019-11-01T10:05:31.000Z</published>
    <updated>2019-11-01T10:05:31.000Z</updated>
    
    <content type="html"><![CDATA[<h2 id="文件系统"><a href="#文件系统" class="headerlink" title="文件系统"></a>文件系统</h2><ol><li>文件</li><li>目录</li><li>链接</li><li>块设备</li><li>字符设备</li><li>管道</li><li>套接字</li></ol><h3 id="文件"><a href="#文件" class="headerlink" title="文件"></a>文件</h3><p>inode惟一索引</p><h4 id="文件属性"><a href="#文件属性" class="headerlink" title="文件属性"></a>文件属性</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">[Fri Nov 01 talen@tp hexo.blog]$ <span class="built_in">stat</span> yarn.lock</span><br><span class="line">File: yarn.lock</span><br><span class="line">Size: 97141           Blocks: 192        IO Block: 4096   regular file</span><br><span class="line">Device: 803h/2051d      Inode: 42116468    Links: 1</span><br><span class="line">Access: (0644/-rw-r--r--)  Uid: ( 1000/   talen)   Gid: (  985/   users)</span><br><span class="line">Access: 2019-09-16 17:39:57.848034466 +0800</span><br><span class="line">Modify: 2019-07-24 20:51:25.073555443 +0800</span><br><span class="line">Change: 2019-07-24 20:51:25.073555443 +0800</span><br><span class="line">Birth: 2019-07-24 20:51:25.073555443 +0800</span><br></pre></td></tr></table></figure><a id="more"></a><h4 id="文件权限"><a href="#文件权限" class="headerlink" title="文件权限"></a>文件权限</h4><h5 id="用户类型"><a href="#用户类型" class="headerlink" title="用户类型"></a>用户类型</h5><ol><li>owner</li><li>group</li><li>other</li></ol><h5 id="权限"><a href="#权限" class="headerlink" title="权限"></a>权限</h5><ol><li>读r</li><li>写w</li><li>执行x</li><li>suid : 进程执行时获取文件拥有者uid的权限</li><li>sgid: 进行执行时获取文件拥有者用户组gid的权限 </li><li>sticky: 向kernel发送一个请求,进程结束后保留在内存中.</li></ol><h4 id="文件内核系统调用"><a href="#文件内核系统调用" class="headerlink" title="文件内核系统调用"></a>文件内核系统调用</h4><p>创建一个文件对象,包含文件指针(使用lseek()改变文件指针位置)</p><ol><li>打开<ol><li>fd = open(path, flag, mode) # 参数分别对应 路径,操作,权限</li></ol></li><li>创建</li><li>访问<ol><li>顺序<ol><li>设备文件</li><li>管道</li></ol></li><li>随机<ol><li>普通文件</li></ol></li><li>read() and write()<ol><li>nread = read(fd, buf, count)</li><li>nwrite = write(fd, buf, count)</li></ol></li><li>close<ol><li>res = close(fd)</li></ol></li></ol></li><li>文件指针<ol><li>newoffset=lseek(fd, offset, whence)</li></ol></li><li>删除,生命名文件不需要打开<ol><li>res = rename(oldpath, newpath)</li><li>res = unlink(pathname)</li></ol></li></ol><h3 id="文件描述符FD"><a href="#文件描述符FD" class="headerlink" title="文件描述符FD"></a>文件描述符FD</h3><p>是进程-&gt;文件描述符FD-&gt;文件对象</p><ol><li>同一进程可有多个FD</li><li>多个进程可以同时操作一个文件,系统不提供同步</li></ol><h2 id="进程"><a href="#进程" class="headerlink" title="进程"></a>进程</h2><h3 id="内核模式"><a href="#内核模式" class="headerlink" title="内核模式"></a>内核模式</h3><p>单处理器,同一时间只有一个进程在运行,用户态的进程调用系统调用后切换到内核态</p><ol><li>用户态<ol><li>|用户态进程调用系统调用切换到内核态</li><li>进程CPU发出异常信号,内核代表产生异常的进程处理异常</li><li>外围设备发出中断请求</li><li>内核进程被执行</li></ol></li><li>内核态</li></ol><h3 id="进程实现"><a href="#进程实现" class="headerlink" title="进程实现"></a>进程实现</h3><p>进程描述符</p><p>进程暂停时,几个相关的处理器寄存器保存在进程描述符中</p><h3 id="进程间通信"><a href="#进程间通信" class="headerlink" title="进程间通信"></a>进程间通信</h3><p>system V ipc</p><ol><li>信号量</li><li>消息队列 POSIX消息队列 </li><li>共享内存</li></ol><h3 id="进程管理"><a href="#进程管理" class="headerlink" title="进程管理"></a>进程管理</h3><ol><li>fork() 父创建新进程<ol><li>wait4()等待子进程退出,返回子进程pid</li><li>init特殊进程管理所有子进程</li></ol></li><li>_exit() 退出进程</li><li>exec() 装入一个新程序</li></ol><h2 id="mmap"><a href="#mmap" class="headerlink" title="mmap"></a>mmap</h2><p>允许存放在块设备上的文件或信息的一部分映射到进程的部分地址空间.</p><p>可用于进程间共享数据</p><h2 id="内存管理"><a href="#内存管理" class="headerlink" title="内存管理"></a>内存管理</h2><h3 id="虚拟内存"><a href="#虚拟内存" class="headerlink" title="虚拟内存"></a>虚拟内存</h3><p>硬件-&gt;虚拟内存-&gt;进程</p><h3 id="随机访问存储器RAM"><a href="#随机访问存储器RAM" class="headerlink" title="随机访问存储器RAM"></a>随机访问存储器RAM</h3><p>内核映像+虚拟内存</p><p>平衡每个内存请求,并在达到阀值时调用页框回收(page frame reclaiming)算法释放其它内存</p><ol><li>内核映像:<ol><li>内核代码</li><li>内核静态数据结构</li></ol></li><li>虚拟内存:<ol><li>内核缓冲区,描述符,动态数据结构</li><li>进程内存请求</li><li>高速缓存</li></ol></li></ol><h3 id="内核内存分配器KMA"><a href="#内核内存分配器KMA" class="headerlink" title="内核内存分配器KMA"></a>内核内存分配器KMA</h3><p>虚拟内存系统一个主要问题是内存碎片</p><ol><li>快</li><li>利用率高,浪费少,碎片少</li><li>与其它内存管理子系统配合</li></ol><p><code>linux在众多算法中选择了solaris的slab分配算法</code></p><h3 id="进程的虚拟地址空间处理"><a href="#进程的虚拟地址空间处理" class="headerlink" title="进程的虚拟地址空间处理"></a>进程的虚拟地址空间处理</h3><p>内核使用一组内存区描述符描述虚拟地址空间.进程通过exec()系统调用开始执行.</p><p>描述符区:</p><ol><li>代码区</li><li>初始化数据</li><li>未初始化数据</li><li>程序栈</li><li>共享库代码及数据</li><li>堆(动态内存)</li></ol><p>请求调页,写时复制</p><p>高速缓存 sync()将脏数据写回磁盘</p><h3 id="驱动"><a href="#驱动" class="headerlink" title="驱动"></a>驱动</h3><p>kernel-&gt;驱动-&gt;I/O设备</p>]]></content>
    
    <summary type="html">
    
      &lt;h2 id=&quot;文件系统&quot;&gt;&lt;a href=&quot;#文件系统&quot; class=&quot;headerlink&quot; title=&quot;文件系统&quot;&gt;&lt;/a&gt;文件系统&lt;/h2&gt;&lt;ol&gt;
&lt;li&gt;文件&lt;/li&gt;
&lt;li&gt;目录&lt;/li&gt;
&lt;li&gt;链接&lt;/li&gt;
&lt;li&gt;块设备&lt;/li&gt;
&lt;li&gt;字符设备&lt;/li&gt;
&lt;li&gt;管道&lt;/li&gt;
&lt;li&gt;套接字&lt;/li&gt;
&lt;/ol&gt;
&lt;h3 id=&quot;文件&quot;&gt;&lt;a href=&quot;#文件&quot; class=&quot;headerlink&quot; title=&quot;文件&quot;&gt;&lt;/a&gt;文件&lt;/h3&gt;&lt;p&gt;inode惟一索引&lt;/p&gt;
&lt;h4 id=&quot;文件属性&quot;&gt;&lt;a href=&quot;#文件属性&quot; class=&quot;headerlink&quot; title=&quot;文件属性&quot;&gt;&lt;/a&gt;文件属性&lt;/h4&gt;&lt;figure class=&quot;highlight bash&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;[Fri Nov 01 talen@tp hexo.blog]$ &lt;span class=&quot;built_in&quot;&gt;stat&lt;/span&gt; yarn.lock&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;File: yarn.lock&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Size: 97141           Blocks: 192        IO Block: 4096   regular file&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Device: 803h/2051d      Inode: 42116468    Links: 1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Access: (0644/-rw-r--r--)  Uid: ( 1000/   talen)   Gid: (  985/   users)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Access: 2019-09-16 17:39:57.848034466 +0800&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Modify: 2019-07-24 20:51:25.073555443 +0800&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Change: 2019-07-24 20:51:25.073555443 +0800&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Birth: 2019-07-24 20:51:25.073555443 +0800&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
    
    </summary>
    
      <category term="linux" scheme="https://talenhao.github.io/categories/linux/"/>
    
    
      <category term="linux" scheme="https://talenhao.github.io/tags/linux/"/>
    
  </entry>
  
  <entry>
    <title>javascript 学习</title>
    <link href="https://talenhao.github.io/2019/09/28/javascript-%E5%AD%A6%E4%B9%A0/"/>
    <id>https://talenhao.github.io/2019/09/28/javascript-学习/</id>
    <published>2019-09-28T13:24:14.000Z</published>
    <updated>2019-09-28T13:24:14.000Z</updated>
    
    <content type="html"><![CDATA[<p>html是结构,CSS是表示,js是动态</p><pre class="mermaid">graph TBES5ES6node(node.js ES服务端运行环境)ES6-->babel(babel转码器)babel-->ES5less-->cssjsonp[jsonp可以跨域]-->apiaxios[axios不能跨域]-->api</pre><p>一个变量,多个数组</p><h2 id="变量"><a href="#变量" class="headerlink" title="变量"></a>变量</h2><p><strong>变量要先声明再赋值</strong></p><p>变量名规范:</p><ol><li>必须以字母、下划线或美元符号开头，后面可以跟字母、下划线、美元符号和数字</li><li><strong>变量名区分大小写</strong></li><li>不允许使用JavaScript关键字和保留字做变量名</li></ol><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> 变量名,变量<span class="number">2</span>,变量n; <span class="comment">//变量需要声明</span></span><br><span class="line"><span class="keyword">var</span> mychar;</span><br><span class="line">mychar=<span class="string">"javascript"</span>;</span><br><span class="line"><span class="keyword">var</span> mynum = <span class="number">6</span>;</span><br></pre></td></tr></table></figure><p>输出变量,字符串可以使用+号串连</p><p>ES6增加let代码块作用域变量</p><h2 id="数组"><a href="#数组" class="headerlink" title="数组"></a>数组</h2><p><strong>创建数组语法：</strong></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">var myarray=new Array(num); //num是数组初始长度,可为空, 可扩展</span><br></pre></td></tr></table></figure><p>数组赋值:</p><p>JS的数组中添加元素只需要使用未使用的索引即可.</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> myarr=<span class="keyword">new</span> <span class="built_in">Array</span>(); <span class="comment">//定义数组</span></span><br><span class="line"> myarr[<span class="number">0</span>]=<span class="number">80</span>; </span><br><span class="line"> myarr[<span class="number">1</span>]=<span class="number">60</span>;</span><br><span class="line"> myarr[<span class="number">2</span>]=<span class="number">99</span>;</span><br><span class="line"><span class="keyword">var</span> myarray = <span class="keyword">new</span> <span class="built_in">Array</span>(<span class="number">66</span>,<span class="number">80</span>,<span class="number">90</span>,<span class="number">77</span>,<span class="number">59</span>);<span class="comment">//创建数组同时赋值</span></span><br><span class="line"><span class="keyword">var</span> myarray = [<span class="number">66</span>,<span class="number">80</span>,<span class="number">90</span>,<span class="number">77</span>,<span class="number">59</span>];<span class="comment">//直接输入一个数组（称 “字面量数组”）</span></span><br></pre></td></tr></table></figure><p>数组长度</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">myarray.length; <span class="comment">//获得数组myarray的长度</span></span><br></pre></td></tr></table></figure><p>数组的维度</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">一维数组的表示: myarray[ ]</span><br><span class="line">二维数组的表示: myarray[ ][ ]</span><br><span class="line"><span class="keyword">var</span> Myarr = [[<span class="number">0</span> , <span class="number">1</span> , <span class="number">2</span> ],[<span class="number">1</span> , <span class="number">2</span> , <span class="number">3</span>]]</span><br><span class="line">myarr[<span class="number">0</span>][<span class="number">1</span>]=<span class="number">5</span>; <span class="comment">//将5的值传入到数组中，覆盖原有值。说明: myarr[0][1] ,0 表示表的行，1表示表的列。</span></span><br></pre></td></tr></table></figure><h2 id="操作符"><a href="#操作符" class="headerlink" title="操作符"></a>操作符</h2><p>算术操作符(+、-、*、/等)，比较操作符(&lt;、&gt;、&gt;=、&lt;=等)，逻辑操作符(&amp;&amp;、||、！)</p><p>自加一<code>“++”</code>；自减一<code>“--”</code></p><p><strong>操作符之间的优先级（高到低）:</strong></p><p>算术操作符 → 比较操作符 → 逻辑操作符 → “=”赋值符号</p><h2 id="condition"><a href="#condition" class="headerlink" title="condition"></a>condition</h2><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span>(条件<span class="number">1</span>)</span><br><span class="line">&#123; 条件<span class="number">1</span>成立时执行的代码&#125;</span><br><span class="line"><span class="keyword">else</span>  <span class="keyword">if</span>(条件<span class="number">2</span>)</span><br><span class="line">&#123; 条件<span class="number">2</span>成立时执行的代码&#125;</span><br><span class="line">...</span><br><span class="line"><span class="keyword">else</span>  <span class="keyword">if</span>(条件n)</span><br><span class="line">&#123; 条件n成立时执行的代码&#125;</span><br><span class="line"><span class="keyword">else</span></span><br><span class="line">&#123; 条件<span class="number">1</span>、<span class="number">2</span>至n不成立时执行的代码&#125;</span><br></pre></td></tr></table></figure><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 当有很多种选项的时候，switch比if else使用更方便。</span></span><br><span class="line"><span class="keyword">switch</span>(表达式)</span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">case</span>值<span class="number">1</span>:</span><br><span class="line">  执行代码块 <span class="number">1</span></span><br><span class="line">  <span class="keyword">break</span>;</span><br><span class="line"><span class="keyword">case</span>值<span class="number">2</span>:</span><br><span class="line">  执行代码块 <span class="number">2</span></span><br><span class="line">  <span class="keyword">break</span>;</span><br><span class="line">...</span><br><span class="line"><span class="keyword">case</span>值n:</span><br><span class="line">  执行代码块 n</span><br><span class="line">  <span class="keyword">break</span>;</span><br><span class="line"><span class="keyword">default</span>:</span><br><span class="line">  与 <span class="keyword">case</span>值<span class="number">1</span> 、 <span class="keyword">case</span>值<span class="number">2.</span>..case值n 不同时执行的代码</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="迭代"><a href="#迭代" class="headerlink" title="迭代"></a>迭代</h2><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">for</span>(初始化变量;循环条件;循环迭代)</span><br><span class="line">&#123;     </span><br><span class="line">    循环语句 </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">while</span>(判断条件)</span><br><span class="line">&#123;</span><br><span class="line">    循环语句</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">do</span> <span class="comment">//先执行一次再循环</span></span><br><span class="line">&#123;</span><br><span class="line">    循环语句</span><br><span class="line"> &#125;</span><br><span class="line"><span class="keyword">while</span>(判断条件)</span><br></pre></td></tr></table></figure><p>break语句退出当前循环，直接执行后面的代码</p><p>continue的作用是仅仅跳过本次循环</p><h2 id="function"><a href="#function" class="headerlink" title="function"></a>function</h2><p>函数定义后需要调用</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> 函数名(<span class="params"></span>)</span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">     函数代码;</span><br><span class="line">&#125;</span><br><span class="line">函数名()</span><br></pre></td></tr></table></figure><h2 id="JavaScript-警告（alert-消息对话框）"><a href="#JavaScript-警告（alert-消息对话框）" class="headerlink" title="JavaScript-警告（alert 消息对话框）"></a>JavaScript-警告（alert 消息对话框）</h2><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">alert(字符串或变量);</span><br></pre></td></tr></table></figure><h2 id="JavaScript-确认（confirm-消息对话框）"><a href="#JavaScript-确认（confirm-消息对话框）" class="headerlink" title="JavaScript-确认（confirm 消息对话框）"></a>JavaScript-确认（confirm 消息对话框）</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">confirm(str);</span><br></pre></td></tr></table></figure><p><strong>参数说明:</strong></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">str：在消息对话框中要显示的文本</span><br><span class="line">返回值: Boolean值</span><br></pre></td></tr></table></figure><p><strong>返回值:</strong></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">当用户点击&quot;确定&quot;按钮时，返回true</span><br><span class="line">当用户点击&quot;取消&quot;按钮时，返回false</span><br></pre></td></tr></table></figure><h2 id="JavaScript-提问（prompt-消息对话框）"><a href="#JavaScript-提问（prompt-消息对话框）" class="headerlink" title="JavaScript-提问（prompt 消息对话框）"></a>JavaScript-提问（prompt 消息对话框）</h2><p><strong>语法:</strong></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">prompt(str1, str2);</span><br></pre></td></tr></table></figure><p><strong>参数说明：</strong></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">str1: 要显示在消息对话框中的文本，不可修改</span><br><span class="line">str2：文本框中的内容，可以修改</span><br></pre></td></tr></table></figure><p><strong>返回值:</strong></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">1. 点击确定按钮，文本框中的内容将作为函数返回值</span><br><span class="line">2. 点击取消按钮，将返回null</span><br></pre></td></tr></table></figure><h2 id="JavaScript-打开新窗口（window-open）"><a href="#JavaScript-打开新窗口（window-open）" class="headerlink" title="JavaScript-打开新窗口（window.open）"></a>JavaScript-打开新窗口（window.open）</h2><p><strong>语法：</strong></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">window.open([URL], [窗口名称], [参数字符串])</span><br></pre></td></tr></table></figure><p><strong>参数说明:</strong></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">URL：可选参数，在窗口中要显示网页的网址或路径。如果省略这个参数，或者它的值是空字符串，那么窗口就不显示任何文档。</span><br><span class="line">窗口名称：可选参数，被打开窗口的名称。</span><br><span class="line">    1.该名称由字母、数字和下划线字符组成。</span><br><span class="line">    2.&quot;_top&quot;、&quot;_blank&quot;、&quot;_self&quot;具有特殊意义的名称。</span><br><span class="line">       _blank：在新窗口显示目标网页</span><br><span class="line">       _self：在当前窗口显示目标网页</span><br><span class="line">       _top：框架网页中在上部窗口中显示目标网页</span><br><span class="line">    3.相同 name 的窗口只能创建一个，要想创建多个窗口则 name 不能相同。</span><br><span class="line">   4.name 不能包含有空格。</span><br><span class="line">参数字符串：可选参数，设置窗口参数，各参数用逗号隔开。</span><br></pre></td></tr></table></figure><p><strong>参数表:</strong></p><p><strong><img src="../../../../images/52e3677900013d6a05020261.jpg" alt="img"></strong></p><h2 id="JavaScript-关闭窗口（window-close）"><a href="#JavaScript-关闭窗口（window-close）" class="headerlink" title="JavaScript-关闭窗口（window.close）"></a>JavaScript-关闭窗口（window.close）</h2><p>close()关闭窗口</p><p><strong>用法：</strong></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">window.close();   //关闭本窗口</span><br></pre></td></tr></table></figure><p>或</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;窗口对象&gt;.close();   //关闭指定的窗口</span><br></pre></td></tr></table></figure><h2 id="认识DOM"><a href="#认识DOM" class="headerlink" title="认识DOM"></a>认识DOM</h2><p>文档对象模型DOM（Document Object Model）定义访问和处理HTML文档的标准方法。DOM 将HTML文档呈现为带有元素、属性和文本的树结构（节点树）。</p><p><img src="../../../../images/52e4bd0f0001dd8d04830279.jpg" alt="img"></p><p><strong>HTML文档可以说由节点构成的集合，三种常见的DOM节点:</strong></p><p>&lt;元素标签 属性&gt;文本&lt;元素&gt;</p><p>为元素标签配置惟一ID属性,通过ID获取元素</p><p><strong>语法:</strong></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">document.getElementById(“id”)</span><br></pre></td></tr></table></figure><p><strong>结果:null</strong>或[<strong>object HTMLParagraphElement]</strong></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">Object.innerHTML; //获取/修改元素的内容</span><br><span class="line"></span><br><span class="line">Object.style.property=new style; //修改元素的CSS样式</span><br><span class="line">&lt;p id=&quot;pcon&quot;&gt;Hello World!&lt;/p&gt;</span><br><span class="line">&lt;script&gt;</span><br><span class="line">   var mychar = document.getElementById(&quot;pcon&quot;);</span><br><span class="line">   mychar.style.color=&quot;red&quot;;</span><br><span class="line">   mychar.style.fontSize=&quot;20&quot;;</span><br><span class="line">   mychar.style.backgroundColor =&quot;blue&quot;;</span><br><span class="line">&lt;/script&gt;</span><br><span class="line"></span><br><span class="line">Object.style.display = none/block；//显示或隐藏对象</span><br><span class="line"></span><br><span class="line">object.className = classname; //配置对象类名</span><br></pre></td></tr></table></figure><p><img src="../../../../images/52e4d4240001dd6c04850229.jpg" alt="img"></p><p>整理链接:<a href="https://www.imooc.com/code/468" target="_blank" rel="noopener">https://www.imooc.com/code/468</a></p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;p&gt;html是结构,CSS是表示,js是动态&lt;/p&gt;
&lt;pre class=&quot;mermaid&quot;&gt;graph TB
ES5
ES6
node(node.js ES服务端运行环境)
ES6--&gt;babel(babel转码器)
babel--&gt;ES5
less--&gt;css
jsonp
      
    
    </summary>
    
      <category term="front-end" scheme="https://talenhao.github.io/categories/front-end/"/>
    
    
      <category term="front-end" scheme="https://talenhao.github.io/tags/front-end/"/>
    
      <category term="javascript" scheme="https://talenhao.github.io/tags/javascript/"/>
    
  </entry>
  
</feed>
